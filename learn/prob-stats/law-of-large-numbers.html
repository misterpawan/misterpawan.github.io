<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Law of Large Numbers - Probability & Statistics</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        };
    </script>

    <!-- MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 1rem;
        }

        .dark .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .interactive-card {
            transition: all 0.3s ease;
        }

        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .dark .interactive-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            border-color: rgba(99, 102, 241, 0.4);
        }
    </style>
</head>

<body
    class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 font-sans antialiased min-h-screen selection:bg-indigo-500 selection:text-white">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b border-gray-200 dark:border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <a href="index.html"
                        class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400">
                        ProbStats
                    </a>
                    <span class="text-gray-400 dark:text-slate-500">/</span>
                    <span class="text-gray-600 dark:text-slate-300 font-medium">Unit 6: LLN</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html"
                        class="text-sm font-medium text-gray-500 dark:text-slate-400 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors">Home</a>
                    <a href="bounds.html"
                        class="text-sm font-medium text-gray-500 dark:text-slate-400 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors">Prev:
                        Bounds</a>
                    <a href="central-limit-theorem.html"
                        class="text-sm font-medium text-indigo-500 dark:text-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-300 transition-colors">Next:
                        CLT</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-20 px-4 relative overflow-hidden">
        <div
            class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/20 via-gray-50/0 to-gray-50/0 dark:via-slate-900/0 dark:to-slate-900/0 pointer-events-none">
        </div>

        <div class="max-w-4xl mx-auto text-center relative z-10">
            <h1
                class="text-5xl md:text-6xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-slate-400">
                Law of Large Numbers
            </h1>
            <p class="text-xl text-gray-600 dark:text-slate-400 leading-relaxed max-w-2xl mx-auto">
                From random chaos to predictable order. Understanding how large samples reveal the truth.
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 pb-24 space-y-16">

        <!-- 1. Random Sampling -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <span
                    class="w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 mr-3 text-sm">1</span>
                Random Sampling
            </h2>
            <div class="prose dark:prose-invert max-w-none text-gray-600 dark:text-slate-300 mb-8">
                <p>
                    A <strong>Random Sample</strong> of size \( n \) is a collection of random variables \( X_1, X_2,
                    \dots, X_n \) that are:
                </p>
                <ul class="list-disc pl-6 space-y-2">
                    <li><strong>Independent:</strong> The outcome of one does not affect the others.</li>
                    <li><strong>Identically Distributed:</strong> They all follow the same probability distribution \(
                        F_X(x) \).</li>
                </ul>
                <p>
                    We call this <strong>i.i.d.</strong> (independent and identically distributed).
                </p>
                <div
                    class="my-6 p-6 bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700/50 text-center shadow-sm">
                    <strong>Sample Mean:</strong> \( \bar{X}_n = \frac{1}{n} \sum_{i=1}^n X_i \)
                </div>
                <p>
                    The sample mean \( \bar{X}_n \) is itself a random variable.
                    <br>
                    \( E[\bar{X}_n] = \mu \) (Unbiased)
                    <br>
                    \( \text{Var}(\bar{X}_n) = \frac{\sigma^2}{n} \) (Variance decreases with \( n \))
                </p>
            </div>
        </section>

        <!-- 2. Weak Law of Large Numbers -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <span
                    class="w-8 h-8 rounded-lg bg-cyan-500/20 flex items-center justify-center text-cyan-600 dark:text-cyan-400 mr-3 text-sm">2</span>
                Weak Law of Large Numbers (WLLN)
            </h2>
            <div class="prose dark:prose-invert max-w-none text-gray-600 dark:text-slate-300 mb-8">
                <p>
                    The WLLN states that as the sample size \( n \) grows, the sample mean \( \bar{X}_n \) converges in
                    probability to the true mean \( \mu \).
                </p>
                <div
                    class="my-6 p-6 bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700/50 text-center shadow-sm">
                    $$ \lim_{n \to \infty} P(|\bar{X}_n - \mu| \geq \epsilon) = 0 $$
                </div>
                <p>
                    Intuitively, this means that for any small error margin \( \epsilon \), the probability of the
                    sample mean being "far" from the true mean goes to zero as we collect more data.
                </p>
            </div>

            <!-- Interactive LLN Simulator -->
            <div class="bg-gray-50 dark:bg-slate-900/50 rounded-xl p-6 border border-gray-200 dark:border-slate-700/50">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Interactive LLN Simulator</h3>
                <p class="text-sm text-gray-600 dark:text-slate-400 mb-6">
                    Simulate flipping a coin (Bernoulli(0.5)). The true mean is 0.5. Watch how the running average \(
                    \bar{X}_n \) settles near 0.5 as \( n \) increases.
                </p>

                <div class="flex items-center space-x-4 mb-6">
                    <button id="start-sim"
                        class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors text-sm font-medium">
                        Start Simulation
                    </button>
                    <button id="reset-sim"
                        class="px-4 py-2 bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors text-sm font-medium">
                        Reset
                    </button>
                </div>

                <div
                    class="h-64 w-full relative border border-gray-200 dark:border-transparent rounded-lg bg-white dark:bg-slate-800/30 p-4">
                    <canvas id="llnChart"></canvas>
                </div>
            </div>
        </section>

        <!-- 3. Quiz Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Check Your Understanding</h2>
            <div class="space-y-6">
                <!-- Quiz 1 -->
                <div
                    class="quiz-item bg-white dark:bg-slate-800/30 p-6 rounded-xl border border-gray-200 dark:border-slate-700/30 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">1. Variance of Sample Mean</h3>
                    <p class="text-gray-600 dark:text-slate-400 mb-4">
                        If \( \text{Var}(X) = 100 \) and \( n = 25 \), what is \( \text{Var}(\bar{X}) \)?
                    </p>
                    <div class="space-y-3">
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="true">
                            \( 100/25 = 4 \)
                        </button>
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="false">
                            \( 100 \) (Variance doesn't change)
                        </button>
                    </div>
                    <div class="quiz-feedback hidden mt-4 p-4 rounded-lg text-sm"></div>
                </div>

                <!-- Quiz 2 -->
                <div
                    class="quiz-item bg-white dark:bg-slate-800/30 p-6 rounded-xl border border-gray-200 dark:border-slate-700/30 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">2. WLLN Implication</h3>
                    <p class="text-gray-600 dark:text-slate-400 mb-4">
                        Does WLLN guarantee that \( \bar{X}_n \) will eventually equal \( \mu \) exactly?
                    </p>
                    <div class="space-y-3">
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="false">
                            Yes, for large enough \( n \).
                        </button>
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="true">
                            No, it only says the probability of being close approaches 1.
                        </button>
                    </div>
                    <div class="quiz-feedback hidden mt-4 p-4 rounded-lg text-sm"></div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Quiz Logic
        document.querySelectorAll('.quiz-option').forEach(button => {
            button.addEventListener('click', function () {
                const parent = this.closest('.quiz-item');
                const feedback = parent.querySelector('.quiz-feedback');
                const isCorrect = this.dataset.correct === 'true';

                // Reset styles
                parent.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('bg-green-500/20', 'border-green-500', 'bg-red-500/20', 'border-red-500');
                    opt.classList.add('bg-gray-50', 'dark:bg-slate-700/30');
                });

                if (isCorrect) {
                    this.classList.remove('bg-gray-50', 'dark:bg-slate-700/30');
                    this.classList.add('bg-green-500/20', 'border-green-500');
                    feedback.textContent = "Correct!";
                    feedback.className = "quiz-feedback mt-4 p-4 rounded-lg text-sm bg-green-500/10 text-green-400 block";
                } else {
                    this.classList.remove('bg-gray-50', 'dark:bg-slate-700/30');
                    this.classList.add('bg-red-500/20', 'border-red-500');
                    feedback.textContent = "Incorrect. Try again!";
                    feedback.className = "quiz-feedback mt-4 p-4 rounded-lg text-sm bg-red-500/10 text-red-400 block";
                }
            });
        });

        // LLN Chart
        const ctx = document.getElementById('llnChart').getContext('2d');
        const isDarkMode = document.documentElement.classList.contains('dark');
        const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
        const textColor = isDarkMode ? '#94a3b8' : '#64748b';

        let llnChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Running Average',
                    data: [],
                    borderColor: 'rgba(34, 211, 238, 1)',
                    backgroundColor: 'rgba(34, 211, 238, 0.1)',
                    borderWidth: 2,
                    pointRadius: 0,
                    tension: 0.1
                }, {
                    label: 'True Mean (0.5)',
                    data: [],
                    borderColor: 'rgba(255, 99, 132, 0.8)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                scales: {
                    y: { min: 0, max: 1, grid: { color: gridColor }, ticks: { color: textColor } },
                    x: { grid: { display: false }, ticks: { color: textColor } }
                },
                plugins: { legend: { display: true, labels: { color: textColor } } }
            }
        });

        let simulationInterval;
        let n = 0;
        let sum = 0;
        const maxN = 500;

        function runSimulation() {
            if (n >= maxN) {
                clearInterval(simulationInterval);
                return;
            }

            // Flip coin (0 or 1)
            const outcome = Math.random() < 0.5 ? 0 : 1;
            sum += outcome;
            n++;
            const avg = sum / n;

            llnChart.data.labels.push(n);
            llnChart.data.datasets[0].data.push(avg);
            llnChart.data.datasets[1].data.push(0.5);
            llnChart.update();
        }

        document.getElementById('start-sim').addEventListener('click', () => {
            clearInterval(simulationInterval);
            simulationInterval = setInterval(runSimulation, 20);
        });

        document.getElementById('reset-sim').addEventListener('click', () => {
            clearInterval(simulationInterval);
            n = 0;
            sum = 0;
            llnChart.data.labels = [];
            llnChart.data.datasets[0].data = [];
            llnChart.data.datasets[1].data = [];
            llnChart.update();
        });

    </script>
</body>

</html>