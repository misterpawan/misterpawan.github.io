<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSP Algorithm & Discrete Optimization | Sequential Decision Making</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Mermaid JS -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>

    <!-- Prism JS for Code Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                tags: 'ams'
            }
        };
    </script>

    <style>
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dark .glass {
            background: rgba(17, 24, 39, 0.95);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
        }

        .definition-box {
            border-left: 4px solid #ec4899;
            background: linear-gradient(to right, #fdf2f8, #ffffff);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* Animations */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased">

    <!-- Navigation -->
    <nav class="glass sticky top-0 z-50 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-xl font-bold gradient-bg bg-clip-text text-transparent">
                ‚Üê Sequential Decision Making
            </a>
            <span class="text-sm font-semibold">Lecture 07: TSP Algorithm & Discrete Optimization</span>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20" data-aos="fade-down">
        <div class="container mx-auto px-4 text-center">
            <div class="inline-block mb-4 p-3 bg-white/20 rounded-full animate-float">
                <span class="text-6xl">üíª</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4">TSP Algorithm & Discrete Optimization</h1>
            <p class="text-lg md:text-xl mb-6 max-w-3xl mx-auto">
                Implementing the Traveling Salesman Problem using Dynamic Programming with memoization, and generalizing
                to discrete optimization.
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12 max-w-5xl">

        <!-- 1. Recalling DP & TSP Example -->
        <section class="glass p-6 md:p-8 rounded-3xl mb-8" data-aos="fade-up">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-pink-100 text-pink-700 p-3 rounded-xl text-2xl">üï∏Ô∏è</span>
                <h2 class="text-2xl md:text-3xl font-bold">1. Recalling DP: A TSP Example</h2>
            </div>

            <div class="flex flex-col md:flex-row gap-8 items-center mb-6">
                <div class="w-full md:w-1/2 flex justify-center">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 w-full">
                        <h4 class="text-center font-bold mb-4">4-City Graph</h4>
                        <div class="mermaid flex justify-center">
                            graph LR
                            0((0)) ---|10| 1((1))
                            0 ---|15| 2((2))
                            0 ---|20| 3((3))
                            1 ---|35| 2
                            1 ---|25| 3
                            2 ---|30| 3
                            style 0 fill:#bfdbfe
                            style 1 fill:#fecaca
                            style 2 fill:#bbf7d0
                            style 3 fill:#fef08a
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2">
                    <h3 class="font-bold text-xl mb-2">Tracing a Trajectory</h3>
                    <p class="text-gray-700 mb-4">
                        Consider the path: <strong>0 ‚Üí 1 ‚Üí 3 ‚Üí 2 ‚Üí 0</strong>.
                    </p>
                    <ul class="list-disc list-inside space-y-2 text-gray-600">
                        <li>Cost = cost(0,1) + totalCost(1, {0,1})</li>
                        <li>Next step: cost(1,3) + totalCost(3, {0,1,3})</li>
                        <li>And so on...</li>
                    </ul>
                    <div class="mt-4 p-3 bg-gray-100 rounded-lg font-mono text-sm">
                        Cost = cost[curr][next] + totalCost(next, visited, ...)
                    </div>
                </div>
            </div>

            <div class="definition-box">
                <h4 class="font-bold text-lg mb-2">Memoization</h4>
                <p>
                    Just like in the Fibonacci algorithm, we need to <strong>memoize</strong> results to avoid
                    overlapping computations.
                </p>
                <p class="mt-2">
                    For example, the paths <strong>(0-1-2-3)</strong> and <strong>(0-2-1-3)</strong> both end up at node
                    3 with set {0,1,2,3} visited. The cost from 3 back to 0 is the same in both cases and should only be
                    computed once.
                </p>
            </div>
        </section>

        <!-- 2. Python Implementation -->
        <section class="glass p-6 md:p-8 rounded-3xl mb-8" data-aos="fade-up">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-blue-100 text-blue-700 p-3 rounded-xl text-2xl">üêç</span>
                <h2 class="text-2xl md:text-3xl font-bold">2. DP for TSP in Python</h2>
            </div>

            <p class="text-gray-600 mb-4">
                Here is the complete Python implementation using recursion and memoization.
            </p>

            <div class="relative">
                <pre class="rounded-xl shadow-lg"><code class="language-python">def totalCost(curr, visited, n, cost, memo):
    # Base case: if all cities are visited, return cost to start (0)
    if len(visited) == n:
        return cost[curr][0]

    # If already computed, return memoized value
    state = (curr, tuple(sorted(list(visited)))) # Use tuple for hashable key
    if state in memo:
        return memo[state]

    ans = float('inf')

    # Try visiting every unvisited city
    for next_city in range(n):
        if next_city not in visited:
            visited.add(next_city)
            ans = min(ans, cost[curr][next_city] + 
                      totalCost(next_city, visited, n, cost, memo))
            visited.remove(next_city)  # Backtrack

    memo[state] = ans
    return ans

def tsp(cost):
    n = len(cost)
    memo = {}
    visited = {0}  # Start with city 0
    return totalCost(0, visited, n, cost, memo)

# Example Cost Matrix
cost = [
    [0, 10, 15, 20],
    [10, 0, 35, 25],
    [15, 35, 0, 30],
    [20, 25, 30, 0]
]
print(f"Minimum Cost: {tsp(cost)}")</code></pre>
            </div>
        </section>

        <!-- 3. General Discrete Optimization -->
        <section class="glass p-6 md:p-8 rounded-3xl mb-8" data-aos="fade-up">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-purple-100 text-purple-700 p-3 rounded-xl text-2xl">‚öôÔ∏è</span>
                <h2 class="text-2xl md:text-3xl font-bold">3. General Discrete Optimization</h2>
            </div>

            <div class="flex flex-col md:flex-row gap-8 items-center">
                <div class="w-full md:w-1/2">
                    <!-- Placeholder for slide14b.png -->
                    <div class="bg-gray-100 rounded-xl p-8 text-center border-2 border-dashed border-gray-300">
                        <p class="text-gray-400 italic">Image: General Discrete Optimization (slide14b.png)</p>
                    </div>
                </div>
                <div class="w-full md:w-1/2">
                    <div class="definition-box mt-0">
                        <h4 class="font-bold text-lg mb-2">Problem Formulation</h4>
                        <p class="mb-2 font-semibold text-purple-700">Minimize \( G(u) \) subject to \( u \in U \)</p>
                        <ul class="list-disc list-inside text-gray-700 space-y-2">
                            <li>Assume solution \( u \) has \( N \) components: \( u = (u_0, \dots, u_{N-1}) \).</li>
                            <li>View components as controls of \( N \) stages.</li>
                            <li>Define state \( x_k = (u_0, \dots, u_{k-1}) \).</li>
                            <li>Start state \( x_0 = s \).</li>
                            <li>Terminal cost is \( G(u) \); all other stage costs are 0.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <p class="mt-4 text-gray-600">
                This formulation allows us to apply Dynamic Programming to a wide range of discrete optimization
                problems by treating the construction of a solution as a sequential decision process.
            </p>
        </section>

        <!-- 4. Interactive Quizzes -->
        <section class="glass p-6 md:p-8 rounded-3xl mb-8" data-aos="fade-up">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-teal-100 text-teal-700 p-3 rounded-xl text-2xl">üß†</span>
                <h2 class="text-2xl md:text-3xl font-bold">4. Test Your Knowledge</h2>
            </div>

            <div class="space-y-6">
                <!-- Quiz 1 -->
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h4 class="font-bold mb-3">1. What is the purpose of the `memo` dictionary in the TSP code?</h4>
                    <div class="flex flex-col gap-2">
                        <button onclick="alert('Correct! It stores results of subproblems to avoid re-computation.')"
                            class="p-3 text-left bg-gray-50 hover:bg-green-100 rounded transition">To store computed
                            costs for (current_city, visited_set) states.</button>
                        <button onclick="alert('Incorrect. That is the job of the `visited` set.')"
                            class="p-3 text-left bg-gray-50 hover:bg-red-100 rounded transition">To keep track of
                            visited cities.</button>
                    </div>
                </div>

                <!-- Quiz 2 -->
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h4 class="font-bold mb-3">2. In the general discrete optimization formulation, what represents the
                        "state" \( x_k \)?</h4>
                    <div class="flex flex-col gap-2">
                        <button onclick="alert('Incorrect.')"
                            class="p-3 text-left bg-gray-50 hover:bg-red-100 rounded transition">The current
                            cost.</button>
                        <button
                            onclick="alert('Correct! The state is defined by the partial solution constructed so far.')"
                            class="p-3 text-left bg-gray-50 hover:bg-green-100 rounded transition">The partial solution
                            \( (u_0, \dots, u_{k-1}) \).</button>
                    </div>
                </div>

                <!-- Quiz 3 -->
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h4 class="font-bold mb-3">3. What is the base case for the recursive TSP function?</h4>
                    <div class="flex flex-col gap-2">
                        <button onclick="alert('Correct! We need to close the loop.')"
                            class="p-3 text-left bg-gray-50 hover:bg-green-100 rounded transition">When all cities are
                            visited, return cost to start.</button>
                        <button onclick="alert('Incorrect. That would be an incomplete tour.')"
                            class="p-3 text-left bg-gray-50 hover:bg-red-100 rounded transition">When one city is
                            visited.</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer Navigation -->
        <div class="flex justify-between mt-12" data-aos="fade-up">
            <a href="q-factors-tsp.html"
                class="group flex items-center gap-3 px-6 py-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition border border-gray-100 dark:border-gray-700">
                <span class="text-2xl group-hover:-translate-x-1 transition">‚Üê</span>
                <div class="text-left">
                    <p class="text-xs text-gray-500 uppercase font-semibold">Previous</p>
                    <p class="font-bold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 transition">Lecture
                        06</p>
                </div>
            </a>
            <a href="approximation-value-space.html"
                class="group flex items-center gap-3 px-6 py-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition border border-gray-100 dark:border-gray-700">
                <div class="text-right">
                    <p class="text-xs text-gray-500 uppercase font-semibold">Next</p>
                    <p class="font-bold text-gray-900 dark:text-gray-100 group-hover:text-blue-600 transition">Lecture
                        08</p>
                </div>
                <span class="text-2xl group-hover:translate-x-1 transition">‚Üí</span>
            </a>
        </div>

    </main>

    <!-- Footer -->
    <footer class="glass p-6 mt-12">
        <div class="container mx-auto text-center text-gray-600 dark:text-gray-400">
            <p>¬© 2024 Sequential Decision Making Course</p>
        </div>
    </footer>

    <script>
        AOS.init({
            duration: 800,
            once: true,
            offset: 100
        });
    </script>
</body>

</html>