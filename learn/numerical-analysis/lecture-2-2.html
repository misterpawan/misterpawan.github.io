<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture 2-2: Interpolation üìà</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Pyodide -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        ntu: {
                            red: '#e11d48',
                            blue: '#1e3a8a',
                            light: '#eff6ff',
                            accent: '#f59e0b',
                        }
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'sans-serif'],
                        mono: ['Consolas', 'Monaco', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f3f4f6;
            color: #1f2937;
        }

        .slide-card {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        /* Editor & Output Styles */
        .editor-container {
            position: relative;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: #ffffff;
            margin-bottom: 0.5rem;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .editor-wrapper {
            position: relative;
            min-height: 250px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            background-color: #ffffff;
        }

        .editor-wrapper textarea,
        .editor-wrapper pre {
            margin: 0;
            padding: 1rem;
            border: none;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            white-space: pre;
            overflow: auto;
            position: absolute;
            top: 0;
            left: 0;
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
            tab-size: 4;
        }

        .editor-wrapper textarea {
            z-index: 2;
            color: transparent;
            background: transparent;
            caret-color: #000;
            resize: none;
            outline: none;
        }

        .editor-wrapper pre {
            z-index: 1;
            background: transparent;
            pointer-events: none;
        }

        .run-bar {
            background: #f1f5f9;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .run-btn {
            background: #1e3a8a;
            color: white;
            padding: 6px 16px;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: 600;
            border: none;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .run-btn:hover {
            background: #1e40af;
        }

        .run-btn:disabled {
            background: #94a3b8;
            cursor: not-allowed;
        }

        .output-box {
            margin-top: 0.5rem;
            background: #ffffff;
            color: #334155;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            min-height: 100px;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .output-img {
            max-width: 100%;
            border-radius: 4px;
            margin-top: 10px;
            border: 1px solid #e2e8f0;
        }

        .math-box {
            background: #eff6ff;
            border-left: 4px solid #1e3a8a;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
            overflow-x: auto;
        }

        /* Teach Mode Styles */
        html.teach-mode-active {
            font-size: 200%;
        }

        body.teach-mode {
            overflow: hidden;
            background: black;
        }

        body.teach-mode nav,
        body.teach-mode header,
        body.teach-mode footer {
            display: none !important;
        }

        body.teach-mode main {
            max-width: none;
            padding: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.teach-mode .slide-card {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            border-radius: 0;
            padding: 4rem;
            z-index: 100;
            overflow-y: auto;
            align-content: center;
        }

        body.teach-mode .slide-card.active-slide {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.98);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .teach-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #e11d48;
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(225, 29, 72, 0.4);
            cursor: pointer;
            z-index: 9999;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .teach-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(225, 29, 72, 0.5);
        }

        body.teach-mode .teach-btn {
            display: none;
        }
    </style>
</head>

<body class="antialiased">

    <button onclick="toggleTeachMode()" class="teach-btn">
        <span>üë®‚Äçüè´</span> Teach Mode
    </button>

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <span class="font-bold text-xl text-slate-800">Numerical Analysis <span
                    class="text-ntu-blue">2-2</span></span>
            <div class="hidden md:flex space-x-1 text-sm font-medium text-slate-600">
                <a href="#intro" class="px-3 py-1 hover:bg-gray-100 rounded">Intro</a>
                <a href="#monomial" class="px-3 py-1 hover:bg-gray-100 rounded">Monomial</a>
                <a href="#lagrange" class="px-3 py-1 hover:bg-gray-100 rounded">Lagrange</a>
                <a href="#newton" class="px-3 py-1 hover:bg-gray-100 rounded">Newton</a>
                <a href="#splines" class="px-3 py-1 hover:bg-gray-100 rounded">Splines</a>
            </div>
        </div>
    </nav>

    <header class="pt-24 pb-16 text-center px-4 bg-gradient-to-b from-blue-50 to-transparent">
        <h1 class="text-5xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight">
            Interpolation üìà
        </h1>
        <p class="text-xl text-slate-600 max-w-2xl mx-auto mb-8">
            Connecting the dots... ideally without the wiggle. <br>
            <span class="text-sm text-blue-600 font-mono">y = f(x)</span>
        </p>
        <div class="flex justify-center gap-4 text-sm text-gray-500 font-mono">
            <span>Lecture 2-2</span>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 pb-20">

        <section id="intro" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">1. The Interpolation Problem</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 4-10</span>
            </div>

            <p class="mb-4">Given a set of data points $(t_1, y_1), (t_2, y_2), \dots, (t_n, y_n)$, find a function
                $y=f(t)$ such that:</p>
            <div class="math-box text-center">
                $$ f(t_i) = y_i \quad \text{for all } i=1,\dots,n $$
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-6">
                <div class="bg-blue-50 p-4 rounded text-sm">
                    <h4 class="font-bold text-blue-800">Interpolation üéØ</h4>
                    <p>Passing exactly through every data point. Used when data is precise (e.g., table values).</p>
                </div>
                <div class="bg-slate-50 p-4 rounded text-sm">
                    <h4 class="font-bold text-slate-800">Approximation (Fitting) üìè</h4>
                    <p>Getting "close" to points. Used when data is noisy (e.g., experimental measurements).</p>
                </div>
            </div>
        </section>

        <section id="monomial" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">2. Monomial Basis</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 11-18</span>
            </div>

            <p class="mb-4">The most natural way to find a polynomial $p(t)$ of degree $n-1$ that passes through $n$
                points is to write it as a linear combination of powers of $t$ (monomials):</p>
            <div class="math-box text-center mb-4">
                $$ p(t) = x_1 + x_2 t + x_3 t^2 + \dots + x_n t^{n-1} $$
            </div>

            <p class="mb-4">We want to find coefficients $x_1, \dots, x_n$ such that the polynomial matches our data
                points $(t_i, y_i)$:</p>
            <div class="math-box text-center mb-4">
                $$
                \begin{aligned}
                p(t_1) &= x_1 + x_2 t_1 + \dots + x_n t_1^{n-1} &= y_1 \\
                p(t_2) &= x_1 + x_2 t_2 + \dots + x_n t_2^{n-1} &= y_2 \\
                &\vdots \\
                p(t_n) &= x_1 + x_2 t_n + \dots + x_n t_n^{n-1} &= y_n
                \end{aligned}
                $$
            </div>

            <p class="mb-4">This system of linear equations can be written in matrix form $A \mathbf{x} = \mathbf{y}$,
                where $A$ is the <strong>Vandermonde Matrix</strong>:</p>
            <div class="math-box text-center text-xs">
                $$
                \underbrace{
                \begin{bmatrix}
                1 & t_1 & \dots & t_1^{n-1} \\
                \vdots & \vdots & \ddots & \vdots \\
                1 & t_n & \dots & t_n^{n-1}
                \end{bmatrix}
                }_{A \text{ (Vandermonde)}}
                \underbrace{
                \begin{bmatrix} x_1 \\ \vdots \\ x_n \end{bmatrix}
                }_{\mathbf{x}}
                =
                \underbrace{
                \begin{bmatrix} y_1 \\ \vdots \\ y_n \end{bmatrix}
                }_{\mathbf{y}}
                $$
            </div>

            <div class="mb-8">
                <h3 class="font-bold text-lg mb-2">Algorithm & Implementation</h3>
                <div id="code-01"></div>
            </div>
        </section>

        <section id="ill-conditioning" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">2.1 The Problem: Ill-Conditioning</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 11-18 (Cont.)</span>
            </div>

            <div class="mb-6">
                <p class="text-sm text-gray-600 mb-2">The basis functions $t^k$ look very similar as $k$ increases.</p>
                <div id="code-03"></div>
            </div>
        </section>

        <section id="lagrange" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">3. Lagrange Interpolation</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 19-24</span>
            </div>

            <p class="mb-4">Instead of solving a linear system, we can write the polynomial directly:</p>
            <div class="math-box text-center">
                $$ p_{n-1}(t) = \sum_{j=1}^n y_j \ell_j(t) $$
                <div class="mt-4 pt-4 border-t border-blue-200">
                    $$ \ell_j(t) = \prod_{k=1, k \ne j}^n \frac{t - t_k}{t_j - t_k} $$
                </div>
            </div>

            <div class="mt-6">
                <h3 class="font-bold text-lg mb-4">Interactive Playground üïπÔ∏è</h3>
                <iframe src="lagrange-playground.html"
                    class="w-full h-[600px] border-none rounded-lg shadow-sm bg-white mb-6"></iframe>
            </div>
        </section>

        <section id="scipy-impl" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">3.1 SciPy Implementation</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 19-24 (Cont.)</span>
            </div>

            <div class="mb-8">
                <h3 class="font-bold text-lg mb-2">SciPy Implementation</h3>
                <div id="code-02"></div>
            </div>
        </section>

        <section id="newton" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">4. Newton Interpolation</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 25-30</span>
            </div>

            <p class="mb-4">Uses <strong>Divided Differences</strong> to build the polynomial incrementally.</p>
            <div class="math-box text-sm mb-6">
                $$ p_j(t) = p_{j-1}(t) + c_j \prod_{k=1}^j (t - t_k) $$
            </div>

            <div class="bg-green-50 p-4 rounded border border-green-200">
                <p class="text-green-800 font-bold text-sm">
                    Benefit: Adding a new data point is cheap ($O(n)$) compared to Lagrange or Monomial ($O(n^2)$ or
                    $O(n^3)$).
                </p>
            </div>

            <div class="mt-6">
                <h3 class="font-bold text-lg mb-4">Interactive Playground üïπÔ∏è</h3>
                <iframe src="newton-playground.html"
                    class="w-full h-[600px] border-none rounded-lg shadow-sm bg-white mb-6"></iframe>
            </div>
        </section>

        <section id="splines" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">5. Splines & The Wiggle</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 41+</span>
            </div>

            <div class="mb-8">
                <h3 class="font-bold text-lg mb-2">Runge's Phenomenon „Ä∞Ô∏è</h3>
                <p class="mb-4 text-sm">High-degree polynomials oscillate wildly near the edges.</p>
                <div id="code-04"></div>
            </div>
        </section>

        <section id="b-splines" class="slide-card">
            <div class="flex justify-between items-center border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-ntu-blue">5.1 B-Splines (Basis Splines)</h2>
                <span class="bg-gray-100 px-3 py-1 rounded text-xs font-mono text-gray-500">Slides 41+ (Cont.)</span>
            </div>

            <div class="mb-8">
                <p class="mb-4 text-sm">Local basis functions ("hat functions") prevent global oscillation.</p>
                <div id="code-05"></div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t py-12 text-center text-sm text-gray-400 mt-12">
        <p>Numerical Analysis Lecture 2-2</p>
    </footer>

    <script>
        // --- Teach Mode Logic ---
        let isTeachMode = false;
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide-card');

        function toggleTeachMode() {
            isTeachMode = !isTeachMode;
            document.body.classList.toggle('teach-mode');
            document.documentElement.classList.toggle('teach-mode-active');

            if (isTeachMode) {
                updateCurrentSlideFromScroll();
                enterFullscreen();
                showSlide(currentSlide);
            } else {
                exitFullscreen();
                slides[currentSlide].scrollIntoView({ behavior: 'auto', block: 'start' });
            }
        }

        function enterFullscreen() {
            const el = document.documentElement;
            if (el.requestFullscreen) el.requestFullscreen();
            else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
        }

        function exitFullscreen() {
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
        }

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.toggle('active-slide', i === index);
            });
        }

        function nextSlide() {
            if (currentSlide < slides.length - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }

        function updateCurrentSlideFromScroll() {
            let closestIndex = 0;
            let minDistance = Infinity;
            slides.forEach((slide, i) => {
                const rect = slide.getBoundingClientRect();
                const distance = Math.abs(rect.top);
                if (distance < minDistance) {
                    minDistance = distance;
                    closestIndex = i;
                }
            });
            currentSlide = closestIndex;
        }

        document.addEventListener('keydown', (e) => {
            if (!isTeachMode) return;
            if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'ArrowDown') nextSlide();
            else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') prevSlide();
            else if (e.key === 'Escape') {
                if (isTeachMode) toggleTeachMode();
            }
        });

        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement && isTeachMode) toggleTeachMode();
        });


        // --- Pyodide Setup ---
        let pyodide = null;
        async function initPyodideEnvironment() {
            if (pyodide) return pyodide;
            pyodide = await loadPyodide();
            await pyodide.loadPackage(['numpy', 'matplotlib', 'scipy']);
            return pyodide;
        }

        async function runPythonCode(code) {
            await initPyodideEnvironment();
            const setupCode = `
import sys
import io
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
plt.close('all')
sys.stdout = io.StringIO()
sys.stderr = io.StringIO()
`;
            const cleanupCode = `
stdout_val = sys.stdout.getvalue()
stderr_val = sys.stdout.getvalue()
`;
            const plotSaver = `
import base64
buf = io.BytesIO()
if plt.get_fignums() and len(plt.gcf().axes) > 0:
    plt.savefig(buf, format='png', bbox_inches='tight')
    buf.seek(0)
    img_str = base64.b64encode(buf.read()).decode('UTF-8')
else:
    img_str = ""
img_str
`;
            try {
                await pyodide.runPythonAsync(setupCode + code + cleanupCode);
                const stdout = pyodide.runPython("stdout_val");
                const stderr = pyodide.runPython("stderr_val");
                const imgB64 = pyodide.runPython(plotSaver);
                return { stdout, stderr, image: imgB64 ? 'data:image/png;base64,' + imgB64 : null };
            } catch (err) {
                return { error: err.message };
            }
        }
    </script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const CodeRunner = ({ id, filename, initialCode }) => {
            const [code, setCode] = useState(initialCode);
            const [output, setOutput] = useState("");
            const [imageSrc, setImageSrc] = useState(null);
            const [status, setStatus] = useState("idle");
            const textareaRef = useRef(null);
            const preRef = useRef(null);

            useEffect(() => {
                if (preRef.current) {
                    preRef.current.removeAttribute('data-highlighted');
                    hljs.highlightElement(preRef.current);
                }
            }, [code]);

            const handleRun = async () => {
                setStatus("running");
                setOutput("");
                setImageSrc(null);
                const result = await runPythonCode(code);
                if (result.error) {
                    setStatus("error");
                    setOutput(result.error);
                } else {
                    setStatus("success");
                    setOutput(result.stdout || (result.image ? "" : "Done (no output)"));
                    if (result.image) setImageSrc(result.image);
                }
            };

            const handleScroll = () => {
                if (textareaRef.current && preRef.current) {
                    preRef.current.scrollTop = textareaRef.current.scrollTop;
                    preRef.current.scrollLeft = textareaRef.current.scrollLeft;
                }
            };

            const handleKeyDown = (e) => {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = e.target.selectionStart;
                    const end = e.target.selectionEnd;
                    setCode(code.substring(0, start) + "    " + code.substring(end));
                    setTimeout(() => { e.target.selectionStart = e.target.selectionEnd = start + 4; }, 0);
                }
            };

            return (
                <div className="mb-6">
                    <div className="editor-container">
                        <div className="run-bar">
                            <span className="text-xs font-mono text-gray-500 font-bold">{filename}</span>
                            <button onClick={handleRun} disabled={status === 'running'} className="run-btn">
                                {status === 'running' ? 'Running...' : '‚ñ∂ Run Code'}
                            </button>
                        </div>
                        <div className="editor-wrapper">
                            <textarea
                                ref={textareaRef}
                                value={code}
                                onChange={(e) => setCode(e.target.value)}
                                onScroll={handleScroll}
                                onKeyDown={handleKeyDown}
                                spellCheck="false"
                            />
                            <pre ref={preRef}><code className="language-python">{code}</code></pre>
                        </div>
                    </div>
                    <div className="output-box">
                        {status === 'idle' && <div className="text-gray-400 italic">Click run to start...</div>}
                        {status === 'running' && <div className="text-blue-500 animate-pulse">Running simulation...</div>}
                        {status === 'error' && <div className="text-red-500 font-bold">Error Traceback:</div>}
                        <div>{output}</div>
                        {imageSrc && <img src={imageSrc} className="output-img" />}
                    </div>
                </div>
            );
        };

        const code01 = `import numpy as np
import scipy.linalg as la

# Data points: (-2, -27), (0, -1), (1, 0)
t = np.array([-2, 0, 1])
y = np.array([-27, -1, 0])

# Construct Vandermonde Matrix
# Columns are t^0, t^1, t^2 ...
A = np.vander(t, increasing=True)

print("Vandermonde Matrix A:")
print(A)

# Solve Ax = y
x = la.solve(A, y)
print("\\nCoefficients x:", x)
print(f"Polynomial: {x[0]:.1f} + {x[1]:.1f}t + {x[2]:.1f}t^2")`;

        const code02 = `from scipy.interpolate import lagrange
import numpy as np

t = [-2, 0, 1]
y = [-27, -1, 0]

# SciPy has a built-in lagrange method
poly = lagrange(t, y)

print("Lagrange Polynomial coefficients:")
print(poly)
# Expected: -4t^2 + 5t - 1`;

        const code03 = `import numpy as np
import matplotlib.pyplot as plt

t = np.linspace(0, 1, 100)
plt.figure(figsize=(6, 4))

for k in range(6):
    plt.plot(t, t**k, label=f'$t^{k}$')

plt.title('Monomial Basis Functions on [0,1]')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()`;

        const code04 = `import numpy as np
import matplotlib.pyplot as plt
from scipy.interpolate import lagrange

def f(x):
    return 1 / (1 + 25 * x**2)

# Equispaced nodes cause oscillation
x_nodes = np.linspace(-1, 1, 11) # 11 points = degree 10
y_nodes = f(x_nodes)

poly = lagrange(x_nodes, y_nodes)

x_plot = np.linspace(-1, 1, 200)
plt.figure(figsize=(8, 5))
plt.plot(x_plot, f(x_plot), 'k-', label='True Function')
plt.plot(x_plot, poly(x_plot), 'r--', label='Polynomial (Deg 10)')
plt.plot(x_nodes, y_nodes, 'bo', label='Nodes')

plt.ylim(-0.2, 1.2)
plt.title("Runge's Phenomenon: Wiggle at the edges")
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()`;

        const code05 = `import numpy as np
import matplotlib.pyplot as plt

t = np.linspace(0, 4, 200)

# "Hat" functions (Linear B-Splines)
def b1(x): return np.where((x>=0)&(x<2), np.where(x<1, x, 2-x), 0)
def b2(x): return np.where((x>=1)&(x<3), np.where(x<2, x-1, 3-x), 0)
def b3(x): return np.where((x>=2)&(x<4), np.where(x<3, x-2, 4-x), 0)

plt.figure(figsize=(8, 3))
plt.fill_between(t, b1(t), alpha=0.5, label='$B_1$')
plt.fill_between(t, b2(t), alpha=0.5, label='$B_2$')
plt.fill_between(t, b3(t), alpha=0.5, label='$B_3$')

plt.title('Linear B-Splines ($1^{st}$ order)')
plt.legend()
plt.show()`;

        ReactDOM.createRoot(document.getElementById('code-01')).render(<CodeRunner filename="l202-interp-01.py" initialCode={code01} />);
        ReactDOM.createRoot(document.getElementById('code-02')).render(<CodeRunner filename="l202-interp-02.py" initialCode={code02} />);
        ReactDOM.createRoot(document.getElementById('code-03')).render(<CodeRunner filename="l202-interp-03.py" initialCode={code03} />);
        ReactDOM.createRoot(document.getElementById('code-04')).render(<CodeRunner filename="l202-interp-04.py" initialCode={code04} />);
        ReactDOM.createRoot(document.getElementById('code-05')).render(<CodeRunner filename="l202-interp-05.py" initialCode={code05} />);

        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false }
            ]
        });
    </script>
</body>

</html>