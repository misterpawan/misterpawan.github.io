<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistical Inference - Probability & Statistics</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        };
    </script>

    <!-- MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 1rem;
        }

        .dark .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .interactive-card {
            transition: all 0.3s ease;
        }

        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .dark .interactive-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            border-color: rgba(99, 102, 241, 0.4);
        }
    </style>
</head>

<body
    class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 font-sans antialiased min-h-screen selection:bg-indigo-500 selection:text-white">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b border-gray-200 dark:border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <a href="index.html"
                        class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400">
                        ProbStats
                    </a>
                    <span class="text-gray-400 dark:text-slate-500">/</span>
                    <span class="text-gray-600 dark:text-slate-300 font-medium">Unit 8: Inference</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html"
                        class="text-sm font-medium text-gray-500 dark:text-slate-400 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors">Home</a>
                    <a href="central-limit-theorem.html"
                        class="text-sm font-medium text-gray-500 dark:text-slate-400 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors">Prev:
                        CLT</a>
                    <a href="bayesian-inference.html"
                        class="text-sm font-medium text-gray-500 dark:text-slate-400 hover:text-indigo-500 dark:hover:text-indigo-400 transition-colors">Next:
                        Bayesian</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-20 px-4 relative overflow-hidden">
        <div
            class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/20 via-gray-50/0 to-gray-50/0 dark:via-slate-900/0 dark:to-slate-900/0 pointer-events-none">
        </div>

        <div class="max-w-4xl mx-auto text-center relative z-10">
            <h1
                class="text-5xl md:text-6xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-slate-400">
                Statistical Inference
            </h1>
            <p class="text-xl text-gray-600 dark:text-slate-400 leading-relaxed max-w-2xl mx-auto">
                Drawing conclusions from data. Point Estimation, Maximum Likelihood, and Confidence Intervals.
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 pb-24 space-y-16">

        <!-- 1. Point Estimation -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <span
                    class="w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 mr-3 text-sm">1</span>
                Point Estimation
            </h2>
            <div class="prose dark:prose-invert max-w-none text-gray-600 dark:text-slate-300 mb-8">
                <p>
                    A <strong>point estimator</strong> \( \hat{\Theta} \) is a function of the sample data used to
                    estimate an unknown parameter \( \theta \).
                </p>
                <div class="grid md:grid-cols-2 gap-6 my-6">
                    <div
                        class="bg-white dark:bg-slate-800/50 p-6 rounded-xl border border-gray-200 dark:border-slate-700/50 shadow-sm">
                        <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Bias</h3>
                        <p class="text-sm">
                            \( B(\hat{\Theta}) = E[\hat{\Theta}] - \theta \)
                            <br>
                            An estimator is <strong>unbiased</strong> if \( B(\hat{\Theta}) = 0 \).
                        </p>
                    </div>
                    <div
                        class="bg-white dark:bg-slate-800/50 p-6 rounded-xl border border-gray-200 dark:border-slate-700/50 shadow-sm">
                        <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Mean Squared Error (MSE)</h3>
                        <p class="text-sm">
                            \( \text{MSE}(\hat{\Theta}) = E[(\hat{\Theta} - \theta)^2] \)
                            <br>
                            \( \text{MSE} = \text{Var}(\hat{\Theta}) + [B(\hat{\Theta})]^2 \)
                        </p>
                    </div>
                </div>
                <p>
                    <strong>Consistency:</strong> An estimator is consistent if it converges in probability to the true
                    parameter as \( n \to \infty \).
                </p>
            </div>
        </section>

        <!-- 2. Maximum Likelihood Estimation -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <span
                    class="w-8 h-8 rounded-lg bg-cyan-500/20 flex items-center justify-center text-cyan-600 dark:text-cyan-400 mr-3 text-sm">2</span>
                Maximum Likelihood Estimation (MLE)
            </h2>
            <div class="prose dark:prose-invert max-w-none text-gray-600 dark:text-slate-300 mb-8">
                <p>
                    The MLE method finds the parameter \( \theta \) that maximizes the <strong>Likelihood
                        Function</strong> \( L(\theta) \), which is the probability of observing the given data.
                </p>
                <div
                    class="my-6 p-6 bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700/50 text-center shadow-sm">
                    $$ \hat{\theta}_{MLE} = \arg\max_{\theta} L(\theta; x_1, \dots, x_n) $$
                </div>
            </div>

            <!-- Interactive MLE Explorer -->
            <div class="bg-gray-50 dark:bg-slate-900/50 rounded-xl p-6 border border-gray-200 dark:border-slate-700/50">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">MLE Explorer: Coin Toss</h3>
                <p class="text-sm text-gray-600 dark:text-slate-400 mb-6">
                    Suppose we flip a coin \( n \) times and get \( k \) heads. The likelihood function for the
                    probability of heads \( p \) is \( L(p) \propto p^k (1-p)^{n-k} \).
                    <br> Adjust \( n \) and \( k \) to see how the likelihood function changes and where the maximum
                    lies.
                </p>

                <div class="grid grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-slate-400 mb-2">Total Flips (\(
                            n \)): <span id="n-mle-val" class="text-gray-900 dark:text-white">10</span></label>
                        <input type="range" min="1" max="50" step="1" value="10" class="w-full accent-cyan-500"
                            id="n-mle-slider">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-slate-400 mb-2">Heads (\( k \)):
                            <span id="k-mle-val" class="text-gray-900 dark:text-white">5</span></label>
                        <input type="range" min="0" max="10" step="1" value="5" class="w-full accent-cyan-500"
                            id="k-mle-slider">
                    </div>
                </div>

                <div
                    class="h-64 w-full relative border border-gray-200 dark:border-transparent rounded-lg bg-white dark:bg-slate-800/30 p-4">
                    <canvas id="mleChart"></canvas>
                </div>
                <p class="text-center mt-4 text-sm font-medium text-cyan-600 dark:text-cyan-400">
                    MLE Estimate: \( \hat{p} = \) <span id="mle-result">0.50</span>
                </p>
            </div>
        </section>

        <!-- 3. Interval Estimation -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <span
                    class="w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center text-emerald-600 dark:text-emerald-400 mr-3 text-sm">3</span>
                Interval Estimation (Confidence Intervals)
            </h2>
            <div class="prose dark:prose-invert max-w-none text-gray-600 dark:text-slate-300 mb-8">
                <p>
                    A \( (1-\alpha)100\% \) <strong>Confidence Interval</strong> is a random interval \( [L, U] \) that
                    contains the true parameter \( \theta \) with probability \( 1-\alpha \).
                </p>
                <div
                    class="my-6 p-6 bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-700/50 text-center shadow-sm">
                    $$ P(L \leq \theta \leq U) = 1 - \alpha $$
                </div>
                <p>
                    <strong>Common CI for Mean (known \( \sigma \)):</strong>
                    $$ \bar{X} \pm z_{\alpha/2} \frac{\sigma}{\sqrt{n}} $$
                </p>
            </div>

            <!-- Interactive CI Simulator -->
            <div class="bg-gray-50 dark:bg-slate-900/50 rounded-xl p-6 border border-gray-200 dark:border-slate-700/50">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Confidence Interval Simulator</h3>
                <p class="text-sm text-gray-600 dark:text-slate-400 mb-6">
                    We generate 20 samples from a Normal distribution with \( \mu=0, \sigma=1 \). For each sample, we
                    calculate the 95% CI.
                    <br> Green intervals contain the true mean (0), Red ones do not. In the long run, ~95% should be
                    green.
                </p>

                <div
                    class="h-64 w-full relative border border-gray-200 dark:border-transparent rounded-lg bg-white dark:bg-slate-800/30 p-4">
                    <canvas id="ciChart"></canvas>
                </div>
                <div class="mt-4 flex justify-center">
                    <button id="run-ci"
                        class="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors text-sm font-medium">
                        Generate New Intervals
                    </button>
                </div>
            </div>
        </section>

        <!-- 4. Quiz Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Check Your Understanding</h2>
            <div class="space-y-6">
                <!-- Quiz 1 -->
                <div
                    class="quiz-item bg-white dark:bg-slate-800/30 p-6 rounded-xl border border-gray-200 dark:border-slate-700/30 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">1. Unbiased Estimator</h3>
                    <p class="text-gray-600 dark:text-slate-400 mb-4">
                        If \( E[\hat{\Theta}] = \theta \), then the estimator is:
                    </p>
                    <div class="space-y-3">
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="true">
                            Unbiased
                        </button>
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="false">
                            Consistent
                        </button>
                    </div>
                    <div class="quiz-feedback hidden mt-4 p-4 rounded-lg text-sm"></div>
                </div>

                <!-- Quiz 2 -->
                <div
                    class="quiz-item bg-white dark:bg-slate-800/30 p-6 rounded-xl border border-gray-200 dark:border-slate-700/30 shadow-sm">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">2. Confidence Interval Meaning
                    </h3>
                    <p class="text-gray-600 dark:text-slate-400 mb-4">
                        What does a 95% CI mean?
                    </p>
                    <div class="space-y-3">
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="false">
                            There is a 95% chance the true parameter is inside this specific interval.
                        </button>
                        <button
                            class="quiz-option w-full text-left p-4 rounded-lg bg-gray-50 dark:bg-slate-700/30 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 border border-gray-200 dark:border-transparent hover:border-indigo-500/50 transition-all text-sm text-gray-700 dark:text-slate-300"
                            data-correct="true">
                            If we repeated the experiment many times, 95% of the constructed intervals would contain the
                            true parameter.
                        </button>
                    </div>
                    <div class="quiz-feedback hidden mt-4 p-4 rounded-lg text-sm"></div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // Quiz Logic
        document.querySelectorAll('.quiz-option').forEach(button => {
            button.addEventListener('click', function () {
                const parent = this.closest('.quiz-item');
                const feedback = parent.querySelector('.quiz-feedback');
                const isCorrect = this.dataset.correct === 'true';

                // Reset styles
                parent.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('bg-green-500/20', 'border-green-500', 'bg-red-500/20', 'border-red-500');
                    opt.classList.add('bg-gray-50', 'dark:bg-slate-700/30');
                });

                if (isCorrect) {
                    this.classList.remove('bg-gray-50', 'dark:bg-slate-700/30');
                    this.classList.add('bg-green-500/20', 'border-green-500');
                    feedback.textContent = "Correct!";
                    feedback.className = "quiz-feedback mt-4 p-4 rounded-lg text-sm bg-green-500/10 text-green-400 block";
                } else {
                    this.classList.remove('bg-gray-50', 'dark:bg-slate-700/30');
                    this.classList.add('bg-red-500/20', 'border-red-500');
                    feedback.textContent = "Incorrect. Try again!";
                    feedback.className = "quiz-feedback mt-4 p-4 rounded-lg text-sm bg-red-500/10 text-red-400 block";
                }
            });
        });

        // MLE Chart
        const mleCtx = document.getElementById('mleChart').getContext('2d');
        const isDarkMode = document.documentElement.classList.contains('dark');
        const gridColor = isDarkMode ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
        const textColor = isDarkMode ? '#94a3b8' : '#64748b';

        let mleChart = new Chart(mleCtx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Likelihood L(p)',
                    data: [],
                    borderColor: 'rgba(34, 211, 238, 1)',
                    backgroundColor: 'rgba(34, 211, 238, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { display: false }, // Likelihood scale is arbitrary
                    x: { min: 0, max: 1, grid: { color: gridColor }, ticks: { color: textColor } }
                },
                plugins: { legend: { display: false } }
            }
        });

        function updateMLE() {
            const n = parseInt(document.getElementById('n-mle-slider').value);
            const k = parseInt(document.getElementById('k-mle-slider').value);

            // Constrain k <= n
            if (k > n) {
                document.getElementById('k-mle-slider').value = n;
                updateMLE();
                return;
            }
            document.getElementById('k-mle-slider').max = n;

            document.getElementById('n-mle-val').textContent = n;
            document.getElementById('k-mle-val').textContent = k;

            const pValues = [];
            const likelihoods = [];

            for (let p = 0; p <= 1; p += 0.01) {
                pValues.push(p.toFixed(2));
                // Use log likelihood to avoid underflow for large n, then exp for visualization
                // But for small n, direct calculation is fine. Let's stick to direct for simplicity of code, 
                // but scale it so max is 1.
                const l = Math.pow(p, k) * Math.pow(1 - p, n - k);
                likelihoods.push(l);
            }

            // Normalize for display
            const maxL = Math.max(...likelihoods);
            const normalizedL = likelihoods.map(l => l / maxL);

            mleChart.data.labels = pValues;
            mleChart.data.datasets[0].data = normalizedL;
            mleChart.update();

            document.getElementById('mle-result').textContent = (k / n).toFixed(2);
        }

        document.getElementById('n-mle-slider').addEventListener('input', updateMLE);
        document.getElementById('k-mle-slider').addEventListener('input', updateMLE);
        updateMLE();


        // CI Chart
        const ciCtx = document.getElementById('ciChart').getContext('2d');

        let ciChart = new Chart(ciCtx, {
            type: 'bar', // Using bar chart to simulate intervals (floating bars)
            data: {
                labels: Array.from({ length: 20 }, (_, i) => i + 1),
                datasets: [{
                    label: 'Confidence Interval',
                    data: [],
                    backgroundColor: [], // Dynamic colors
                    borderWidth: 0,
                    barPercentage: 0.2
                }]
            },
            options: {
                indexAxis: 'y', // Horizontal bars
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        grid: { color: gridColor },
                        ticks: { color: textColor },
                        title: { display: true, text: 'Parameter Value (True Mean = 0)', color: textColor }
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: textColor },
                        title: { display: true, text: 'Sample ID', color: textColor }
                    }
                },
                plugins: {
                    legend: { display: false },
                    annotation: {
                        annotations: {
                            line1: {
                                type: 'line',
                                xMin: 0,
                                xMax: 0,
                                borderColor: 'rgba(255, 255, 255, 0.5)',
                                borderWidth: 2,
                                borderDash: [5, 5]
                            }
                        }
                    }
                }
            }
        });

        function generateCIs() {
            const numSamples = 20;
            const n = 30; // Sample size per interval
            const trueMean = 0;
            const trueStd = 1;
            const z = 1.96; // 95% CI

            const intervals = [];
            const colors = [];

            for (let i = 0; i < numSamples; i++) {
                // Generate sample mean
                // X_bar ~ N(mu, sigma^2/n)
                // X_bar = mu + Z * sigma / sqrt(n)
                const sampleMean = trueMean + (Math.random() + Math.random() + Math.random() + Math.random() + Math.random() + Math.random() - 3) * (trueStd / Math.sqrt(n)); // Approx normal using CLT on random()

                const margin = z * (trueStd / Math.sqrt(n));
                const lower = sampleMean - margin;
                const upper = sampleMean + margin;

                intervals.push([lower, upper]);

                if (lower <= trueMean && upper >= trueMean) {
                    colors.push('rgba(16, 185, 129, 0.8)'); // Green
                } else {
                    colors.push('rgba(239, 68, 68, 0.8)'); // Red
                }
            }

            ciChart.data.datasets[0].data = intervals;
            ciChart.data.datasets[0].backgroundColor = colors;
            ciChart.update();
        }

        document.getElementById('run-ci').addEventListener('click', generateCIs);
        generateCIs();

    </script>
</body>

</html>