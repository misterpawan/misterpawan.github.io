<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joint Distributions - Probability & Statistics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
        }

        .interactive-card {
            transition: all 0.3s ease;
        }

        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .grid-cell {
            transition: all 0.2s;
        }

        .grid-cell:hover {
            background-color: rgba(99, 102, 241, 0.3);
            transform: scale(1.05);
        }
    </style>
</head>

<body class="min-h-screen selection:bg-indigo-500 selection:text-white">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <a href="index.html"
                        class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400">
                        ProbStats
                    </a>
                    <span class="text-slate-500">/</span>
                    <span class="text-slate-300 font-medium">Unit 4: Joint Distributions</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html"
                        class="text-sm font-medium text-slate-400 hover:text-indigo-400 transition-colors">Home</a>
                    <a href="mixed-rv.html"
                        class="text-sm font-medium text-slate-400 hover:text-indigo-400 transition-colors">Prev: Mixed
                        RVs</a>
                    <a href="joint-continuous-rv.html"
                        class="text-sm font-medium text-indigo-400 hover:text-indigo-300 transition-colors">Next:
                        Joint Continuous RVs</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-20 px-4 relative overflow-hidden">
        <div
            class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-900/0 to-slate-900/0 pointer-events-none">
        </div>

        <div class="max-w-4xl mx-auto text-center relative z-10">
            <h1
                class="text-5xl md:text-6xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400">
                Joint Distributions
            </h1>
            <p class="text-xl text-slate-400 leading-relaxed max-w-2xl mx-auto">
                Relationships are complicated. When two random variables interact, we need a bigger map.
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 pb-24 space-y-16">

        <!-- Definition Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-indigo-300">1. Joint Probability Mass Function (PMF)</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    For two discrete random variables \( X \) and \( Y \), the <strong>Joint PMF</strong> gives the
                    probability that \( X \) takes a specific value \( x \) AND \( Y \) takes a specific value \( y \)
                    at the same time.
                </p>
                <div class="my-6 p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 text-center">
                    $$ P_{XY}(x,y) = P(X=x, Y=y) $$
                </div>
                <p>
                    Just like a single PMF sums to 1, the sum of all joint probabilities over all possible pairs
                    \((x,y)\) must be 1.
                    $$ \sum_x \sum_y P_{XY}(x,y) = 1 $$
                </p>
            </div>
        </section>

        <!-- Interactive Joint PMF Viewer -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-cyan-300">2. Visualizing Joint Probabilities</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    Imagine a grid where the height of each bar represents the probability of that specific \((x,y)\)
                    pair occurring.
                    Interact with the grid below to see how the total probability is distributed.
                </p>
            </div>

            <div class="bg-slate-900/50 rounded-xl p-6 border border-slate-700/50">
                <h3 class="text-lg font-semibold text-white mb-4">Interactive Joint PMF Table</h3>
                <p class="text-sm text-slate-400 mb-6">
                    Hover over cells to see the probability. Click "Calculate Marginals" to see the sums for each row
                    and column.
                </p>

                <div class="flex flex-col md:flex-row gap-8 items-start">
                    <!-- The Grid -->
                    <div class="flex-1 w-full overflow-x-auto">
                        <div class="grid grid-cols-4 gap-2 text-center text-sm font-mono">
                            <!-- Header Row -->
                            <div class="p-2 text-slate-500">X \ Y</div>
                            <div class="p-2 bg-slate-800 rounded text-amber-400 font-bold">0</div>
                            <div class="p-2 bg-slate-800 rounded text-amber-400 font-bold">1</div>
                            <div class="p-2 bg-slate-800 rounded text-amber-400 font-bold">2</div>

                            <!-- Row 0 -->
                            <div
                                class="p-2 bg-slate-800 rounded text-emerald-400 font-bold flex items-center justify-center">
                                0</div>
                            <div class="p-4 bg-indigo-500/20 border border-indigo-500/50 rounded grid-cell cursor-pointer relative group"
                                data-val="0.166">
                                1/6
                                <div
                                    class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-slate-700 z-10">
                                    P(0,0) ≈ 0.167</div>
                            </div>
                            <div class="p-4 bg-indigo-500/30 border border-indigo-500/50 rounded grid-cell cursor-pointer relative group"
                                data-val="0.25">
                                1/4
                                <div
                                    class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-slate-700 z-10">
                                    P(0,1) = 0.25</div>
                            </div>
                            <div class="p-4 bg-indigo-500/10 border border-indigo-500/50 rounded grid-cell cursor-pointer relative group"
                                data-val="0.125">
                                1/8
                                <div
                                    class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-slate-700 z-10">
                                    P(0,2) = 0.125</div>
                            </div>

                            <!-- Row 1 -->
                            <div
                                class="p-2 bg-slate-800 rounded text-emerald-400 font-bold flex items-center justify-center">
                                1</div>
                            <div class="p-4 bg-indigo-500/10 border border-indigo-500/50 rounded grid-cell cursor-pointer relative group"
                                data-val="0.125">
                                1/8
                                <div
                                    class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-slate-700 z-10">
                                    P(1,0) = 0.125</div>
                            </div>
                            <div class="p-4 bg-indigo-500/20 border border-indigo-500/50 rounded grid-cell cursor-pointer relative group"
                                data-val="0.166">
                                1/6
                                <div
                                    class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-slate-700 z-10">
                                    P(1,1) ≈ 0.167</div>
                            </div>
                            <div class="p-4 bg-indigo-500/20 border border-indigo-500/50 rounded grid-cell cursor-pointer relative group"
                                data-val="0.166">
                                1/6
                                <div
                                    class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-slate-700 z-10">
                                    P(1,2) ≈ 0.167</div>
                            </div>
                        </div>
                    </div>

                    <!-- Marginal Display -->
                    <div class="w-full md:w-64 bg-slate-800/50 p-4 rounded-xl border border-slate-700/50">
                        <h4 class="text-sm font-bold text-white mb-4 uppercase tracking-wider">Marginal Probabilities
                        </h4>

                        <div class="space-y-4">
                            <div>
                                <div class="text-xs text-emerald-400 mb-1">P(X=x) (Summing Rows)</div>
                                <div class="flex justify-between text-sm text-slate-300 border-b border-slate-700 pb-1">
                                    <span>P(X=0)</span>
                                    <span id="marg-x-0" class="font-mono">-</span>
                                </div>
                                <div class="flex justify-between text-sm text-slate-300 pt-1">
                                    <span>P(X=1)</span>
                                    <span id="marg-x-1" class="font-mono">-</span>
                                </div>
                            </div>

                            <div>
                                <div class="text-xs text-amber-400 mb-1">P(Y=y) (Summing Cols)</div>
                                <div class="flex justify-between text-sm text-slate-300 border-b border-slate-700 pb-1">
                                    <span>P(Y=0)</span>
                                    <span id="marg-y-0" class="font-mono">-</span>
                                </div>
                                <div class="flex justify-between text-sm text-slate-300 border-b border-slate-700 py-1">
                                    <span>P(Y=1)</span>
                                    <span id="marg-y-1" class="font-mono">-</span>
                                </div>
                                <div class="flex justify-between text-sm text-slate-300 pt-1">
                                    <span>P(Y=2)</span>
                                    <span id="marg-y-2" class="font-mono">-</span>
                                </div>
                            </div>
                        </div>

                        <button onclick="calculateMarginals()"
                            class="mt-6 w-full py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg text-sm font-medium transition-colors mb-4">
                            Calculate Marginals
                        </button>

                        <div class="border-t border-slate-700 pt-4">
                            <h4 class="text-sm font-bold text-white mb-2 uppercase tracking-wider">Conditionals</h4>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="calculateConditional('Y', 0)"
                                    class="py-1 px-2 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300">Given
                                    Y=0</button>
                                <button onclick="calculateConditional('Y', 1)"
                                    class="py-1 px-2 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300">Given
                                    Y=1</button>
                                <button onclick="calculateConditional('Y', 2)"
                                    class="py-1 px-2 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300">Given
                                    Y=2</button>
                            </div>
                            <div id="conditional-result" class="mt-3 text-xs text-slate-400 font-mono hidden">
                                <!-- Results will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Marginal Distribution Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-emerald-300">3. Marginal Distributions</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    Sometimes we have the joint distribution but we only care about one variable. We can "marginalize"
                    the other variable out by summing over all its possible values.
                </p>
                <div class="grid md:grid-cols-2 gap-8 my-6">
                    <div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700/50">
                        <h4 class="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">Marginal PMF of X
                        </h4>
                        $$ P_X(x) = \sum_y P_{XY}(x,y) $$
                        <p class="text-xs text-slate-500 mt-2">"Squashing" the table horizontally.</p>
                    </div>
                    <div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700/50">
                        <h4 class="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">Marginal PMF of Y
                        </h4>
                        $$ P_Y(y) = \sum_x P_{XY}(x,y) $$
                        <p class="text-xs text-slate-500 mt-2">"Squashing" the table vertically.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Joint CDF Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-amber-300">4. Joint Cumulative Distribution Function
                (CDF)</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    The <strong>Joint CDF</strong>, denoted as \( F_{XY}(x,y) \), gives the probability that \( X \le x
                    \) AND \( Y \le y \).
                </p>
                <div class="my-6 p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 text-center">
                    $$ F_{XY}(x,y) = P(X \le x, Y \le y) $$
                </div>
                <p>
                    It accumulates probability from the bottom-left "corner" up to the point \((x,y)\). It is a
                    non-decreasing function in both \(x\) and \(y\).
                    $$ F_{XY}(\infty, \infty) = 1, \quad F_{XY}(-\infty, y) = 0, \quad F_{XY}(x, -\infty) = 0 $$
                </p>
            </div>
        </section>

        <!-- Conditional Distributions Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-pink-300">5. Conditional Distributions</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    If we know \( Y = y \), the distribution of \( X \) changes. This is the <strong>Conditional
                        PMF</strong>.
                </p>
                <div class="my-6 p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 text-center">
                    $$ P_{X|Y}(x|y) = \frac{P_{XY}(x,y)}{P_Y(y)} $$
                </div>
                <p>
                    It's like slicing the joint distribution grid at a specific row or column and re-normalizing so it
                    sums to 1.
                </p>
            </div>
        </section>

        <!-- Conditional Expectation Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-purple-300">6. Conditional Expectation</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    The expected value of \( X \) given that \( Y = y \) is the <strong>Conditional
                        Expectation</strong>.
                </p>
                <div class="my-6 p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 text-center">
                    $$ E[X|Y=y] = \sum_x x \cdot P_{X|Y}(x|y) $$
                </div>
                <p>
                    Note that \( E[X|Y] \) is itself a random variable because it depends on the value of \( Y \).
                </p>
            </div>
        </section>

        <!-- Law of Total Expectation Section -->
        <section class="glass-panel p-8 md:p-10">
            <h2 class="text-2xl font-bold text-white mb-6 text-teal-300">7. Law of Total Expectation</h2>
            <div class="prose prose-invert max-w-none text-slate-300 mb-8">
                <p>
                    The overall expectation of \( X \) is the weighted average of its conditional expectations.
                </p>
                <div class="my-6 p-6 bg-slate-800/50 rounded-xl border border-slate-700/50 text-center">
                    $$ E[X] = E[E[X|Y]] = \sum_y E[X|Y=y] \cdot P_Y(y) $$
                </div>
            </div>
        </section>

        <!-- Find the Flaw Section -->
        <section class="glass-panel p-8 md:p-10 border-l-4 border-red-500">
            <h2 class="text-2xl font-bold text-white mb-6">Find the Flaw</h2>
            <p class="text-slate-300 mb-6">
                A student claims that if \( P(X=x) \) and \( P(Y=y) \) are known, then \( P_{XY}(x,y) \) is simply \(
                P(X=x) \times P(Y=y) \).
                <br><br>
                Is this always true?
            </p>

            <div class="bg-slate-900/50 rounded-xl p-6">
                <button onclick="toggleFlaw()"
                    class="text-indigo-400 hover:text-indigo-300 text-sm font-medium flex items-center">
                    <span id="flaw-btn-text">Show Answer</span>
                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                <div id="flaw-answer" class="hidden mt-4 text-slate-300 text-sm border-t border-slate-700 pt-4">
                    <p class="font-bold text-red-400 mb-2">NO! That's only true if X and Y are Independent.</p>
                    <p>
                        If \( X \) and \( Y \) are dependent (correlated), knowing \( X \) gives you information about
                        \( Y \), so you can't just multiply their marginal probabilities.
                        <br>
                        Example: Let \( X \) be "It rains" and \( Y \) be "Ground is wet". \( P(X,Y) \) is high. But \(
                        P(X) \times P(Y) \) might be lower if we ignore the connection.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <script>
        function calculateMarginals() {
            // Data from the grid
            // Row 0: 1/6, 1/4, 1/8 -> 0.166, 0.25, 0.125
            // Row 1: 1/8, 1/6, 1/6 -> 0.125, 0.166, 0.166

            const row0 = [1 / 6, 1 / 4, 1 / 8];
            const row1 = [1 / 8, 1 / 6, 1 / 6];

            // Calculate X Marginals (Sum of rows)
            const px0 = row0.reduce((a, b) => a + b, 0);
            const px1 = row1.reduce((a, b) => a + b, 0);

            // Calculate Y Marginals (Sum of cols)
            const py0 = row0[0] + row1[0];
            const py1 = row0[1] + row1[1];
            const py2 = row0[2] + row1[2];

            // Update DOM
            document.getElementById('marg-x-0').textContent = px0.toFixed(3);
            document.getElementById('marg-x-1').textContent = px1.toFixed(3);

            document.getElementById('marg-y-0').textContent = py0.toFixed(3);
            document.getElementById('marg-y-1').textContent = py1.toFixed(3);
            document.getElementById('marg-y-2').textContent = py2.toFixed(3);
        }

        function calculateConditional(variable, value) {
            const row0 = [1 / 6, 1 / 4, 1 / 8];
            const row1 = [1 / 8, 1 / 6, 1 / 6];

            let resultHTML = '';

            if (variable === 'Y') {
                // Given Y=y, find P(X|Y=y)
                // Col 0: P(Y=0) = 1/6 + 1/8 = 7/24
                // Col 1: P(Y=1) = 1/4 + 1/6 = 5/12
                // Col 2: P(Y=2) = 1/8 + 1/6 = 7/24

                let marginalY, jointX0, jointX1;

                if (value === 0) {
                    marginalY = row0[0] + row1[0];
                    jointX0 = row0[0];
                    jointX1 = row1[0];
                } else if (value === 1) {
                    marginalY = row0[1] + row1[1];
                    jointX0 = row0[1];
                    jointX1 = row1[1];
                } else {
                    marginalY = row0[2] + row1[2];
                    jointX0 = row0[2];
                    jointX1 = row1[2];
                }

                const pX0_given_Y = jointX0 / marginalY;
                const pX1_given_Y = jointX1 / marginalY;

                // Calculate E[X|Y=y] = 0*P(X=0|Y) + 1*P(X=1|Y)
                const expX_given_Y = 0 * pX0_given_Y + 1 * pX1_given_Y;

                resultHTML = `
                    <div class="mb-1 text-pink-400 font-bold">P(X|Y=${value}):</div>
                    <div>P(X=0) = ${pX0_given_Y.toFixed(3)}</div>
                    <div>P(X=1) = ${pX1_given_Y.toFixed(3)}</div>
                    <div class="mt-2 text-purple-400 font-bold">E[X|Y=${value}] = ${expX_given_Y.toFixed(3)}</div>
                `;
            }

            const resultDiv = document.getElementById('conditional-result');
            resultDiv.innerHTML = resultHTML;
            resultDiv.classList.remove('hidden');
        }

        function toggleFlaw() {
            const answer = document.getElementById('flaw-answer');
            const btnText = document.getElementById('flaw-btn-text');

            if (answer.classList.contains('hidden')) {
                answer.classList.remove('hidden');
                btnText.textContent = "Hide Answer";
            } else {
                answer.classList.add('hidden');
                btnText.textContent = "Show Answer";
            }
        }
    </script>
</body>

</html>