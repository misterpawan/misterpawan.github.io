<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variational Autoencoders | Generative Modelling</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] } };</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class', theme: { extend: { fontFamily: { sans: ['Inter', 'sans-serif'] }, colors: { primary: '#ec4899' } } } };</script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.78);
            backdrop-filter: blur(14px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark .glass {
            background: rgba(17, 24, 39, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.06);
        }

        @keyframes dataFlow {
            0% {
                stroke-dashoffset: 100;
            }

            100% {
                stroke-dashoffset: 0;
            }
        }

        .data-flow {
            animation: dataFlow 2s linear infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .pulsing {
            animation: pulse 2s ease-in-out infinite;
        }

        .quiz-option:hover {
            background-color: #fff1f2;
            border-color: #ec4899;
        }

        .dark .quiz-option:hover {
            background-color: #374151;
        }

        .correct {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
        }

        .wrong {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
        }

        #latent-canvas {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: crosshair;
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-purple-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-950 dark:to-gray-900 dark:text-gray-100">
    <div class="fixed top-0 left-0 w-full h-1 bg-gray-200 z-50">
        <div id="progress-bar" class="h-full bg-primary w-0 transition-all"></div>
    </div>

    <nav class="sticky top-4 z-40 max-w-5xl mx-auto px-4 mb-8 pt-4">
        <div class="glass rounded-2xl shadow-lg p-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-2 font-bold hover:text-primary transition"><span>‚Üê</span>
                Back to Course</a>
            <div class="flex gap-3 text-xs">
                <span class="px-3 py-1 rounded-full bg-pink-100 text-pink-700">VAE</span>
                <span class="px-3 py-1 rounded-full bg-purple-100 text-purple-700">Latent</span>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto px-4 pb-24 space-y-12">
        <header class="text-center py-8" data-aos="fade-down">
            <h1
                class="text-4xl md:text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-pink-600 to-purple-600">
                Variational Autoencoders</h1>
            <p class="text-xl text-gray-700 dark:text-gray-300 max-w-3xl mx-auto">Learning compressed representations
                through probabilistic encoding and decoding</p>
        </header>

        <!-- Autoencoders Introduction -->
        <section class="glass p-8 rounded-3xl" data-aos="fade-up">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-blue-100 text-blue-700 p-2 rounded-xl">üîÑ</span>
                <h2 class="text-2xl font-bold">Autoencoders: Compress & Reconstruct</h2>
            </div>
            <p class="mb-6 text-gray-700 dark:text-gray-300">
                An <strong>autoencoder</strong> is an unsupervised neural network that learns to compress data into a
                lower-dimensional latent space and then reconstruct it back.
            </p>

            <!-- Interactive Architecture -->
            <div
                class="bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl mb-6">
                <h3 class="font-bold mb-4 text-center">Interactive Autoencoder Architecture</h3>
                <svg width="100%" height="200" viewBox="0 0 800 200" class="mx-auto">
                    <!-- Input -->
                    <rect x="20" y="60" width="120" height="80" rx="10" fill="#3b82f6" stroke="#2563eb"
                        stroke-width="2" />
                    <text x="80" y="105" text-anchor="middle" fill="white" font-weight="bold"
                        font-size="16">Input</text>
                    <text x="80" y="125" text-anchor="middle" fill="white" font-size="12">x ‚àà ‚Ñù‚Åø</text>

                    <!-- Encoder -->
                    <rect x="180" y="70" width="120" height="60" rx="10" fill="#10b981" stroke="#059669"
                        stroke-width="2" />
                    <text x="240" y="105" text-anchor="middle" fill="white" font-weight="bold"
                        font-size="16">Encoder</text>

                    <!-- Latent Space -->
                    <rect x="340" y="60" width="120" height="80" rx="10" fill="#f59e0b" stroke="#d97706"
                        stroke-width="2" />
                    <text x="400" y="95" text-anchor="middle" fill="white" font-weight="bold"
                        font-size="16">Latent</text>
                    <text x="400" y="115" text-anchor="middle" fill="white" font-size="12">z ‚àà ‚Ñù·µà</text>
                    <text x="400" y="130" text-anchor="middle" fill="white" font-size="10">(d &lt;&lt; n)</text>

                    <!-- Decoder -->
                    <rect x="500" y="70" width="120" height="60" rx="10" fill="#10b981" stroke="#059669"
                        stroke-width="2" />
                    <text x="560" y="105" text-anchor="middle" fill="white" font-weight="bold"
                        font-size="16">Decoder</text>

                    <!-- Output -->
                    <rect x="660" y="60" width="120" height="80" rx="10" fill="#3b82f6" stroke="#2563eb"
                        stroke-width="2" />
                    <text x="720" y="100" text-anchor="middle" fill="white" font-weight="bold"
                        font-size="16">Output</text>
                    <text x="720" y="120" text-anchor="middle" fill="white" font-size="12">xÃÇ ‚àà ‚Ñù‚Åø</text>

                    <!-- Animated Arrows -->
                    <path d="M 140 100 L 180 100" stroke="#6366f1" stroke-width="3" stroke-dasharray="5,5"
                        class="data-flow" marker-end="url(#arrowBlue)" />
                    <path d="M 300 100 L 340 100" stroke="#6366f1" stroke-width="3" stroke-dasharray="5,5"
                        class="data-flow" marker-end="url(#arrowBlue)" />
                    <path d="M 460 100 L 500 100" stroke="#6366f1" stroke-width="3" stroke-dasharray="5,5"
                        class="data-flow" marker-end="url(#arrowBlue)" />
                    <path d="M 620 100 L 660 100" stroke="#6366f1" stroke-width="3" stroke-dasharray="5,5"
                        class="data-flow" marker-end="url(#arrowBlue)" />

                    <defs>
                        <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" fill="#6366f1" />
                        </marker>
                    </defs>
                </svg>
                <p class="text-sm text-center text-gray-600 dark:text-gray-400 mt-4">
                    Data flows through encoder ‚Üí compressed representation ‚Üí decoder ‚Üí reconstruction
                </p>
            </div>

            <!-- Loss Function -->
            <div class="bg-purple-50 dark:bg-gray-800 p-6 rounded-xl mb-4">
                <h3 class="font-bold mb-3">Training Objective: Reconstruction Loss</h3>
                <div class="bg-white dark:bg-gray-900 p-4 rounded-lg">
                    <p class="text-center font-mono text-lg">
                        $\mathcal{L}(\mathbf{x}, \hat{\mathbf{x}}) = \frac{1}{N} \sum_{i=1}^{N} \|\mathbf{x}_i -
                        \hat{\mathbf{x}}_i\|^2$
                    </p>
                    <p class="text-center text-sm text-gray-600 dark:text-gray-400 mt-2">
                        Mean Squared Error between input and reconstruction
                    </p>
                </div>
            </div>

            <!-- Applications -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="p-4 rounded-xl bg-blue-50 dark:bg-gray-800 border border-blue-200">
                    <h4 class="font-semibold mb-1">üìä Dimensionality Reduction</h4>
                    <p class="text-xs">Learn lower-dimensional representations</p>
                </div>
                <div class="p-4 rounded-xl bg-green-50 dark:bg-gray-800 border border-green-200">
                    <h4 class="font-semibold mb-1">üé® Feature Learning</h4>
                    <p class="text-xs">Extract meaningful features automatically</p>
                </div>
                <div class="p-4 rounded-xl bg-purple-50 dark:bg-gray-800 border border-purple-200">
                    <h4 class="font-semibold mb-1">üîä Denoising</h4>
                    <p class="text-xs">Remove noise from corrupted data</p>
                </div>
                <div class="p-4 rounded-xl bg-orange-50 dark:bg-gray-800 border border-orange-200">
                    <h4 class="font-semibold mb-1">‚ö†Ô∏è Anomaly Detection</h4>
                    <p class="text-xs">High reconstruction error ‚Üí anomaly</p>
                </div>
                <div class="p-4 rounded-xl bg-pink-50 dark:bg-gray-800 border border-pink-200">
                    <h4 class="font-semibold mb-1">üé≠ Generation</h4>
                    <p class="text-xs">VAEs generate new samples</p>
                </div>
                <div class="p-4 rounded-xl bg-cyan-50 dark:bg-gray-800 border border-cyan-200">
                    <h4 class="font-semibold mb-1">üóúÔ∏è Compression</h4>
                    <p class="text-xs">Efficient data storage</p>
                </div>
            </div>
        </section>

        <!-- PCA Connection -->
        <section class="space-y-6" data-aos="fade-up">
            <div class="flex items-center gap-3">
                <span class="bg-purple-100 text-purple-700 p-2 rounded-xl">üîó</span>
                <h2 class="text-2xl font-bold">Connection to PCA</h2>
            </div>

            <div class="glass p-8 rounded-2xl">
                <div
                    class="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-900 p-6 rounded-xl mb-6">
                    <h3 class="font-bold mb-3">Key Insight</h3>
                    <p class="text-gray-700 dark:text-gray-300 mb-3">
                        <strong>Linear autoencoders</strong> (with linear activation functions) learn the same solution
                        as <strong>Principal Component Analysis (PCA)</strong>!
                    </p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="p-3 bg-white dark:bg-gray-900 rounded-lg">
                            <p class="font-semibold mb-1 text-blue-700 dark:text-blue-300">PCA</p>
                            <p class="text-sm">Finds principal components via eigendecomposition of covariance matrix
                            </p>
                        </div>
                        <div class="p-3 bg-white dark:bg-gray-900 rounded-lg">
                            <p class="font-semibold mb-1 text-green-700 dark:text-green-300">Linear Autoencoder</p>
                            <p class="text-sm">Learns same subspace via gradient descent on MSE loss</p>
                        </div>
                    </div>
                </div>

                <!-- PCA Example -->
                <div
                    class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl">
                    <h3 class="font-bold mb-4 text-center">Example: Computing PCA</h3>
                    <div class="space-y-4 text-sm">
                        <div class="p-4 bg-white dark:bg-gray-900 rounded-lg">
                            <p class="font-semibold mb-2">Step 1: Original Data</p>
                            <p class="font-mono text-xs">
                                $X = \begin{bmatrix} 1 & 2 \\ 2 & 3 \\ 3 & 5 \end{bmatrix}$
                            </p>
                        </div>

                        <div class="p-4 bg-white dark:bg-gray-900 rounded-lg">
                            <p class="font-semibold mb-2">Step 2: Center the Data</p>
                            <p class="font-mono text-xs mb-2">
                                $\bar{\mathbf{x}} = \begin{bmatrix} 2 \\ 3.333 \end{bmatrix}$
                            </p>
                            <p class="font-mono text-xs">
                                $X_c = \begin{bmatrix} -1 & -1.333 \\ 0 & -0.333 \\ 1 & 1.667 \end{bmatrix}$
                            </p>
                        </div>

                        <div class="p-4 bg-white dark:bg-gray-900 rounded-lg">
                            <p class="font-semibold mb-2">Step 3: Covariance Matrix</p>
                            <p class="font-mono text-xs">
                                $\Sigma = \frac{1}{2} X_c^T X_c = \begin{bmatrix} 1 & 1.5 \\ 1.5 & 2.333 \end{bmatrix}$
                            </p>
                        </div>

                        <div class="p-4 bg-white dark:bg-gray-900 rounded-lg">
                            <p class="font-semibold mb-2">Step 4: Eigendecomposition</p>
                            <p class="font-mono text-xs mb-1">
                                $\lambda_1 = 3.116, \quad \mathbf{v}_1 = \begin{bmatrix} -0.464 \\ -0.886 \end{bmatrix}$
                            </p>
                            <p class="font-mono text-xs">
                                $\lambda_2 = 0.216, \quad \mathbf{v}_2 = \begin{bmatrix} 0.886 \\ -0.464 \end{bmatrix}$
                            </p>
                        </div>

                        <div class="p-4 bg-green-50 dark:bg-green-900 rounded-lg border-l-4 border-green-400">
                            <p class="font-semibold mb-2">Step 5: Project onto PC1</p>
                            <p class="font-mono text-xs">
                                $X_p = X_c \mathbf{v}_1 = \begin{bmatrix} 1.161 \\ 0.300 \\ -1.461 \end{bmatrix}$
                            </p>
                            <p class="text-xs mt-2 text-green-900 dark:text-green-200">
                                ‚úì Reduced from 2D to 1D while preserving maximum variance!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz 1 -->
        <section class="glass p-6 rounded-3xl border-2 border-pink-100" data-aos="zoom-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">üß† Quiz 1</h3>
                <button onclick="resetQuiz1()" class="text-sm text-primary font-semibold">Reset</button>
            </div>
            <p class="mb-3 font-semibold">What is the main difference between a standard autoencoder and PCA?</p>
            <div class="grid gap-3">
                <button class="quiz-option p-4 rounded-xl border transition text-left" onclick="markQuiz1(this, false)">
                    PCA minimizes reconstruction error while autoencoders maximize it
                </button>
                <button class="quiz-option p-4 rounded-xl border transition text-left" onclick="markQuiz1(this, true)">
                    Linear autoencoders learn the same solution as PCA, but nonlinear autoencoders can learn more
                    complex representations
                </button>
                <button class="quiz-option p-4 rounded-xl border transition text-left" onclick="markQuiz1(this, false)">
                    PCA requires labeled data while autoencoders don't
                </button>
            </div>
            <p id="quiz1-feedback" class="mt-3 text-sm font-semibold"></p>
        </section>

        <!-- VAE Introduction -->
        <section class="space-y-6" data-aos="fade-up">
            <div class="flex items-center gap-3">
                <span class="bg-pink-100 text-pink-700 p-2 rounded-xl">üé≤</span>
                <h2 class="text-2xl font-bold">Variational Autoencoders (VAE)</h2>
            </div>

            <div class="glass p-8 rounded-2xl">
                <p class="mb-6 text-gray-700 dark:text-gray-300">
                    VAEs extend autoencoders by making the latent space <strong>probabilistic</strong>, enabling them to
                    generate new samples by sampling from a learned distribution!
                </p>

                <!-- VAE Architecture -->
                <div
                    class="bg-gradient-to-br from-pink-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl mb-6">
                    <h3 class="font-bold mb-4 text-center">VAE Architecture</h3>
                    <svg width="100%" height="280" viewBox="0 0 800 280">
                        <!-- Input -->
                        <rect x="20" y="100" width="100" height="80" rx="10" fill="#3b82f6" />
                        <text x="70" y="145" text-anchor="middle" fill="white" font-weight="bold">Input x</text>

                        <!-- Encoder -->
                        <rect x="160" y="90" width="120" height="100" rx="10" fill="#10b981" />
                        <text x="220" y="130" text-anchor="middle" fill="white" font-weight="bold">Encoder</text>
                        <text x="220" y="150" text-anchor="middle" fill="white" font-size="12">q_œÜ(z|x)</text>

                        <!-- Mean & Variance -->
                        <rect x="320" y="60" width="80" height="50" rx="5" fill="#f59e0b" />
                        <text x="360" y="90" text-anchor="middle" fill="white" font-weight="bold">Œº</text>
                        <rect x="320" y="130" width="80" height="50" rx="5" fill="#f59e0b" />
                        <text x="360" y="160" text-anchor="middle" fill="white" font-weight="bold">œÉ¬≤</text>

                        <!-- Sampling -->
                        <circle cx="470" cy="140" r="40" fill="#ec4899" />
                        <text x="470" y="135" text-anchor="middle" fill="white" font-weight="bold"
                            font-size="12">Sample</text>
                        <text x="470" y="150" text-anchor="middle" fill="white" font-size="10">z ~ N(Œº,œÉ¬≤)</text>

                        <!-- Decoder -->
                        <rect x="560" y="90" width="120" height="100" rx="10" fill="#10b981" />
                        <text x="620" y="130" text-anchor="middle" fill="white" font-weight="bold">Decoder</text>
                        <text x="620" y="150" text-anchor="middle" fill="white" font-size="12">p_Œ∏(x|z)</text>

                        <!-- Output -->
                        <rect x="720" y="100" width="60" height="80" rx="10" fill="#3b82f6" />
                        <text x="750" y="145" text-anchor="middle" fill="white" font-weight="bold">xÃÇ</text>

                        <!-- Arrows -->
                        <path d="M 120 140 L 160 140" stroke="#6366f1" stroke-width="2" marker-end="url(#arrow)" />
                        <path d="M 280 130 Q 300 85 320 85" stroke="#6366f1" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <path d="M 280 150 Q 300 155 320 155" stroke="#6366f1" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <path d="M 400 85 Q 435 105 445 130" stroke="#6366f1" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <path d="M 400 155 Q 435 150 445 145" stroke="#6366f1" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <path d="M 510 140 L 560 140" stroke="#6366f1" stroke-width="2" marker-end="url(#arrow)" />
                        <path d="M 680 140 L 720 140" stroke="#6366f1" stroke-width="2" marker-end="url(#arrow)" />

                        <!-- Epsilon -->
                        <text x="470" y="200" text-anchor="middle" font-size="11" fill="#666">Œµ ~ N(0,1)</text>
                        <path d="M 470 180 L 470 165" stroke="#999" stroke-width="1" stroke-dasharray="3,3" />

                        <defs>
                            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#6366f1" />
                            </marker>
                        </defs>
                    </svg>
                    <p class="text-sm text-center text-gray-600 dark:text-gray-400 mt-4">
                        Encoder outputs Œº and œÉ¬≤ ‚Üí Sample z using reparameterization trick ‚Üí Decoder reconstructs
                    </p>
                </div>

                <!-- Loss Components -->
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <div class="p-5 rounded-xl bg-blue-50 dark:bg-gray-800 border-l-4 border-blue-400">
                        <h4 class="font-bold mb-2 text-blue-700 dark:text-blue-300">Reconstruction Loss</h4>
                        <p class="text-sm mb-2">$\mathcal{L}_{\text{rec}} = \mathbb{E}_{q_\phi(z|x)}[\log
                            p_\theta(x|z)]$</p>
                        <p class="text-xs">Encourages accurate reconstruction</p>
                    </div>
                    <div class="p-5 rounded-xl bg-purple-50 dark:bg-gray-800 border-l-4 border-purple-400">
                        <h4 class="font-bold mb-2 text-purple-700 dark:text-purple-300">KL Divergence Loss</h4>
                        <p class="text-sm mb-2">$\mathcal{L}_{\text{KL}} = D_{KL}(q_\phi(z|x) \| p(z))$</p>
                        <p class="text-xs">Regularizes latent space to match prior</p>
                    </div>
                </div>

                <div
                    class="bg-gradient-to-r from-pink-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 p-6 rounded-xl">
                    <h4 class="font-bold mb-3 text-center">Total VAE Loss (ELBO)</h4>
                    <div class="bg-white dark:bg-gray-900 p-4 rounded-lg">
                        <p class="text-center font-mono">
                            $\mathcal{L}_{\text{VAE}} = \mathcal{L}_{\text{rec}} + \beta \mathcal{L}_{\text{KL}}$
                        </p>
                        <p class="text-center text-sm text-gray-600 dark:text-gray-400 mt-2">
                            Evidence Lower BOund (ELBO) - maximize to improve model
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Latent Space -->
        <section class="glass p-8 rounded-3xl" data-aos="fade-up">
            <h3 class="text-xl font-bold mb-4 text-center">üé® Interactive: Explore Latent Space</h3>
            <p class="text-sm text-center text-gray-600 dark:text-gray-400 mb-4">
                Click on the canvas to sample from different regions of the 2D latent space!
            </p>
            <div class="flex flex-col items-center gap-4">
                <canvas id="latent-canvas" width="400" height="400" class="bg-gray-50 dark:bg-gray-900"></canvas>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div class="p-3 bg-blue-50 dark:bg-gray-800 rounded-lg">
                        <p class="font-semibold">üìç Current z:</p>
                        <p id="z-coords" class="font-mono text-xs">[0.00, 0.00]</p>
                    </div>
                    <div class="p-3 bg-green-50 dark:bg-gray-800 rounded-lg">
                        <p class="font-semibold">üé≤ Sampled:</p>
                        <p id="sample-count" class="font-mono text-xs">0 points</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- VAE Algorithm -->
        <section class="space-y-6" data-aos="fade-up">
            <div class="flex items-center gap-3">
                <span class="bg-cyan-100 text-cyan-700 p-2 rounded-xl">‚öôÔ∏è</span>
                <h2 class="text-2xl font-bold">VAE Training Algorithm</h2>
            </div>

            <div class="glass p-8 rounded-2xl">
                <div
                    class="bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl">
                    <h3 class="font-bold mb-4 text-center">Algorithm: Train VAE</h3>
                    <div class="space-y-2 font-mono text-xs bg-white dark:bg-gray-900 p-4 rounded-lg">
                        <p><span class="text-pink-600">Input:</span> Data $\{\mathbf{x}^i\}_{i=1}^n$, epochs $E$, batch
                            size $m$, latent dim $d$</p>
                        <p><span class="text-pink-600">1:</span> Initialize encoder $q_\phi(\mathbf{z}|\mathbf{x})$ and
                            decoder $p_\theta(\mathbf{x}|\mathbf{z})$</p>
                        <p><span class="text-pink-600">2:</span> <span class="text-purple-600">for</span> $e=1$ to $E$:
                        </p>
                        <p class="ml-4"><span class="text-pink-600">3:</span> Shuffle training data</p>
                        <p class="ml-4"><span class="text-pink-600">4:</span> <span class="text-purple-600">for
                                each</span> minibatch $\{\mathbf{x}^j\}_{j=1}^m$:</p>
                        <p class="ml-8"><span class="text-pink-600">5:</span> Encode: Compute $\mu, \sigma^2 =
                            q_\phi(\mathbf{z}|\mathbf{x})$</p>
                        <p class="ml-8"><span class="text-pink-600">6:</span> Sample: $\mathbf{z} = \mu + \sigma \odot
                            \epsilon$ where $\epsilon \sim \mathcal{N}(0,I)$</p>
                        <p class="ml-8"><span class="text-pink-600">7:</span> Decode: $\hat{\mathbf{x}} =
                            p_\theta(\mathbf{x}|\mathbf{z})$</p>
                        <p class="ml-8"><span class="text-pink-600">8:</span> Compute $\mathcal{L}_{\text{rec}} =
                            \|\mathbf{x} - \hat{\mathbf{x}}\|^2$</p>
                        <p class="ml-8"><span class="text-pink-600">9:</span> Compute $\mathcal{L}_{\text{KL}} =
                            -\frac{1}{2}\sum(1 + \log\sigma^2 - \mu^2 - \sigma^2)$</p>
                        <p class="ml-8"><span class="text-pink-600">10:</span> Total loss: $\mathcal{L} =
                            \mathcal{L}_{\text{rec}} + \mathcal{L}_{\text{KL}}$</p>
                        <p class="ml-8"><span class="text-pink-600">11:</span> Update $\phi, \theta$ via backpropagation
                        </p>
                    </div>
                    <div class="mt-4 p-3 bg-green-50 dark:bg-gray-800 rounded-lg border-l-4 border-green-400">
                        <p class="text-xs font-semibold">üîë Reparameterization Trick: $z = \mu + \sigma \odot \epsilon$
                            makes sampling differentiable!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz 2 -->
        <section class="glass p-6 rounded-3xl border-2 border-pink-100" data-aos="zoom-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">üß† Quiz 2</h3>
                <button onclick="resetQuiz2()" class="text-sm text-primary font-semibold">Reset</button>
            </div>
            <p class="mb-3 font-semibold">Why is the reparameterization trick necessary in VAEs?</p>
            <div class="grid gap-3">
                <button class="quiz-option p-4 rounded-xl border transition text-left text-sm"
                    onclick="markQuiz2(this, false)">
                    To make the model train faster
                </button>
                <button class="quiz-option p-4 rounded-xl border transition text-left text-sm"
                    onclick="markQuiz2(this, true)">
                    To make the sampling operation differentiable so we can backpropagate gradients through it
                </button>
                <button class="quiz-option p-4 rounded-xl border transition text-left text-sm"
                    onclick="markQuiz2(this, false)">
                    To ensure the latent space is Gaussian
                </button>
            </div>
            <p id="quiz2-feedback" class="mt-3 text-sm font-semibold"></p>
        </section>

        <!-- Summary -->
        <section class="glass p-8 rounded-3xl" data-aos="fade-up">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-pink-100 text-pink-700 p-2 rounded-xl">üìù</span>
                <h2 class="text-2xl font-bold">Key Takeaways</h2>
            </div>
            <div class="grid md:grid-cols-3 gap-4">
                <div
                    class="p-4 rounded-xl bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-gray-800 dark:to-gray-900 border border-blue-200">
                    <h3 class="font-bold mb-2">üîÑ Autoencoders</h3>
                    <p class="text-sm">Learn compressed representations through encoder-decoder architecture</p>
                </div>
                <div
                    class="p-4 rounded-xl bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-900 border border-purple-200">
                    <h3 class="font-bold mb-2">üìä PCA Link</h3>
                    <p class="text-sm">Linear autoencoders = PCA, but nonlinear ones learn richer features</p>
                </div>
                <div
                    class="p-4 rounded-xl bg-gradient-to-br from-pink-50 to-rose-50 dark:from-gray-800 dark:to-gray-900 border border-pink-200">
                    <h3 class="font-bold mb-2">üé≤ VAEs</h3>
                    <p class="text-sm">Probabilistic latent space enables generation via sampling</p>
                </div>
            </div>
        </section>

        <section class="text-center" data-aos="fade-up">
            <p class="text-xl text-pink-700 dark:text-pink-300 italic">
                "Compress, regularize, generate‚Äîthe VAE way!"
            </p>
        </section>
    </main>

    <script>
        AOS.init();
        window.addEventListener('scroll', () => {
            const h = document.documentElement.scrollHeight - window.innerHeight;
            document.getElementById('progress-bar').style.width = `${(window.scrollY / h) * 100}%`;
        });

        // Latent Space Interactive Canvas
        const canvas = document.getElementById('latent-canvas');
        const ctx = canvas.getContext('2d');
        let samples = [];

        function drawLatentSpace() {
            ctx.clearRect(0, 0, 400, 400);

            // Draw grid
            ctx.strokeStyle = '#e5e7eb';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 400; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, 400);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(400, i);
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = '#94a3b8';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(200, 0);
            ctx.lineTo(200, 400);
            ctx.moveTo(0, 200);
            ctx.lineTo(400, 200);
            ctx.stroke();

            // Draw Gaussian density (simplified)
            const gradient = ctx.createRadialGradient(200, 200, 0, 200, 200, 150);
            gradient.addColorStop(0, 'rgba(236, 72, 153, 0.3)');
            gradient.addColorStop(1, 'rgba(236, 72, 153, 0.0)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 400);

            // Draw sampled points
            samples.forEach(s => {
                ctx.fillStyle = '#ec4899';
                ctx.beginPath();
                ctx.arc(s.x, s.y, 5, 0, 2 * Math.PI);
                ctx.fill();
            });

            // Labels
            ctx.fillStyle = '#64748b';
            ctx.font = '12px Inter';
            ctx.fillText('z‚ÇÅ', 385, 195);
            ctx.fillText('z‚ÇÇ', 205, 15);
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Convert to z coordinates (-2 to 2)
            const z1 = ((x - 200) / 50).toFixed(2);
            const z2 = ((200 - y) / 50).toFixed(2);

            samples.push({ x, y });
            if (samples.length > 20) samples.shift();

            document.getElementById('z-coords').textContent = `[${z1}, ${z2}]`;
            document.getElementById('sample-count').textContent = `${samples.length} points`;
            drawLatentSpace();
        });

        drawLatentSpace();

        // Quiz functions
        function markQuiz1(btn, correct) {
            document.querySelectorAll('.quiz-option').forEach(b => b.classList.remove('correct', 'wrong'));
            btn.classList.add(correct ? 'correct' : 'wrong');
            document.getElementById('quiz1-feedback').textContent = correct ?
                '‚úì Correct! Linear AEs = PCA, but nonlinear AEs learn more complex features.' :
                '‚úó Try again. Think about the activation functions.';
        }

        function resetQuiz1() {
            document.querySelectorAll('.quiz-option').forEach(b => b.classList.remove('correct', 'wrong'));
            document.getElementById('quiz1-feedback').textContent = '';
        }

        function markQuiz2(btn, correct) {
            document.querySelectorAll('#quiz2-feedback').forEach(() => { });
            document.querySelectorAll('.quiz-option').forEach(b => b.classList.remove('correct', 'wrong'));
            btn.classList.add(correct ? 'correct' : 'wrong');
            document.getElementById('quiz2-feedback').textContent = correct ?
                '‚úì Perfect! Reparameterization (z = Œº + œÉŒµ) makes sampling differentiable!' :
                '‚úó Not quite. Think about backpropagation through random sampling.';
        }

        function resetQuiz2() {
            document.querySelectorAll('.quiz-option').forEach(b => b.classList.remove('correct', 'wrong'));
            document.getElementById('quiz2-feedback').textContent = '';
        }
    </script>
</body>

</html>