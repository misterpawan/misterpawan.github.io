<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 450: Interpolation - The Art of Connecting Dots</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        illini: {
                            orange: '#E84A27',
                            blue: '#13294B',
                        }
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'sans-serif'],
                        mono: ['Consolas', 'Monaco', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f8fafc;
            color: #334155;
        }

        .slide-card {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 3rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        .code-container {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 0;
            background: #282c34;
            border-radius: 8px;
            overflow: hidden;
            margin: 1.5rem 0;
            min-height: 300px;
            border: 1px solid #e2e8f0;
        }

        @media (max-width: 1024px) {
            .code-container {
                grid-template-columns: 1fr;
            }
        }

        .code-editor {
            padding: 1rem;
            color: #abb2bf;
            font-size: 0.85rem;
            overflow-x: auto;
            border-right: 1px solid #3e4451;
            position: relative;
        }

        .output-panel {
            padding: 1rem;
            background: #21252b;
            color: #98c379;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            overflow-y: auto;
            max-height: 400px;
            position: relative;
        }

        .run-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #E84A27;
            color: white;
            padding: 6px 14px;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            z-index: 10;
            font-weight: bold;
            border: none;
            transition: background 0.2s;
        }

        .run-btn:hover {
            background: #c23b1b;
        }

        .math-box {
            background: #f1f5f9;
            border-left: 4px solid #13294B;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            border-radius: 0 8px 8px 0;
        }

        .quiz-container {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .quiz-option {
            display: block;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background: #f3f4f6;
        }

        .quiz-option.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #166534;
        }

        .quiz-option.wrong {
            background: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }
    </style>
</head>

<body>

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <span class="font-bold text-xl text-slate-800">Numerical Analysis <span
                    class="text-illini-orange">2-2</span></span>
            <div class="hidden md:flex space-x-1 text-sm font-medium text-slate-600">
                <a href="#intro" class="px-3 py-1 hover:bg-gray-100 rounded">Intro</a>
                <a href="#monomial" class="px-3 py-1 hover:bg-gray-100 rounded">Monomial</a>
                <a href="#lagrange" class="px-3 py-1 hover:bg-gray-100 rounded">Lagrange</a>
                <a href="#newton" class="px-3 py-1 hover:bg-gray-100 rounded">Newton</a>
                <a href="#splines" class="px-3 py-1 hover:bg-gray-100 rounded">Splines</a>
                <a href="#bsplines" class="px-3 py-1 hover:bg-gray-100 rounded">B-Splines</a>
            </div>
        </div>
    </nav>

    <header class="pt-24 pb-16 text-center px-4 bg-gradient-to-b from-blue-50 to-transparent">
        <h1 class="text-5xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight">
            Interpolation
        </h1>
        <p class="text-xl text-slate-600 max-w-2xl mx-auto mb-8">
            The art of reading between the lines (literally). üìà
        </p>
        <div class="flex justify-center gap-4 text-sm text-gray-500 font-mono">
            <span>Lecture 2-2</span>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 pb-20">

        <section id="intro" class="slide-card">
            <div class="slide-header flex justify-between border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-illini-blue">1. What is Interpolation?</h2>
                <span class="slide-number bg-gray-100 px-3 py-1 rounded text-sm font-bold text-gray-600">Slides
                    1-7</span>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <div>
                    <h3 class="font-bold text-lg mb-2">The Basic Problem</h3>
                    <p class="text-slate-600 mb-4">
                        Given data points $(t_i, y_i)$ for $i=1,\dots,m$, find a function $f: \mathbb{R} \to \mathbb{R}$
                        such that:
                    </p>
                    <div class="math-box text-center">
                        $$ f(t_i) = y_i \quad \text{for } i=1,\dots,m $$
                    </div>
                    <p class="text-sm text-slate-500 italic">f is called the interpolant.</p>
                </div>

                <div class="bg-blue-50 p-6 rounded-lg">
                    <h4 class="font-bold text-illini-blue mb-2">Why do we do this? ü§î</h4>
                    <ul class="list-disc ml-5 space-y-2 text-sm text-slate-700">
                        <li><strong>Plotting:</strong> Smooth curves through discrete dots.</li>
                        <li><strong>Analysis:</strong> Differentiating or integrating tabulated data.</li>
                        <li><strong>Evaluation:</strong> Replacing a complex function (expensive) with a
                            simple one (cheap).</li>
                    </ul>
                </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                <h4 class="font-bold text-yellow-800">‚ö†Ô∏è Interpolation vs. Approximation</h4>
                <p class="text-sm text-yellow-900">
                    <strong>Interpolation:</strong> Must hit every single point exactly.<br>
                    <strong>Approximation (e.g., Least Squares):</strong> Gets "close" to points. Better for
                    noisy data.
                </p>
            </div>

            <div id="quiz-1-root"></div>
        </section>

        <section id="monomial" class="slide-card">
            <div class="slide-header flex justify-between border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-illini-blue">2. Polynomial Interpolation: Monomial Basis</h2>
                <span class="slide-number bg-gray-100 px-3 py-1 rounded text-sm font-bold text-gray-600">Slides
                    11-18</span>
            </div>

            <p class="mb-4">The simplest choice is a polynomial. For $n$ data points, there is a
                <strong>unique</strong> polynomial of degree at most $n-1$.
            </p>

            <h3 class="font-bold text-lg mb-2 text-indigo-600">Monomial Basis</h3>
            <div class="math-box text-sm">
                $$ p_{n-1}(t) = x_1 + x_2 t + x_3 t^2 + \dots + x_n t^{n-1} $$
            </div>

            <p class="mb-4">Solving for coefficients $x$ involves the <strong>Vandermonde Matrix</strong>:</p>
            <div class="math-box text-center text-xs">
                $$
                \begin{bmatrix}
                1 & t_1 & \dots & t_1^{n-1} \\
                1 & t_2 & \dots & t_2^{n-1} \\
                \vdots & \vdots & \ddots & \vdots \\
                1 & t_n & \dots & t_n^{n-1}
                \end{bmatrix}
                \begin{bmatrix} x_1 \\ \vdots \\ x_n \end{bmatrix}
                =
                \begin{bmatrix} y_1 \\ \vdots \\ y_n \end{bmatrix}
                $$
            </div>

            <div class="bg-red-50 p-4 rounded border border-red-100 mb-6">
                <p class="font-bold text-red-800">The Problem:</p>
                <p class="text-sm text-red-700">The Vandermonde matrix becomes <strong>ill-conditioned</strong> very
                    quickly as degree increases. Solving it requires $O(n^3)$ work.</p>
            </div>

            <div class="mb-6">
                <h4 class="font-bold text-sm mb-2">Visualizing Monomials $t^k$ on [0,1]</h4>
                <div id="plot-monomial" class="h-64 bg-white border rounded"></div>
                <p class="text-xs text-center text-gray-500 mt-1">Notice how they all look similar (crowded) near 1.
                    This causes linear dependence issues!</p>
            </div>

            <div class="code-container">
                <div class="code-editor">
                    <button class="run-btn" onclick="runMonomial()">‚ñ∂ Run Vandermonde</button>
                    <pre><code class="language-python">import numpy as np
import scipy.linalg as la

# Data points: (-2, -27), (0, -1), (1, 0)
t = np.array([-2, 0, 1])
y = np.array([-27, -1, 0])

# Construct Vandermonde Matrix
# Columns are t^0, t^1, t^2
A = np.vander(t, increasing=True)

print("Vandermonde Matrix A:")
print(A)

# Solve Ax = y
x = la.solve(A, y)
print("\nCoefficients x:", x)
print(f"Polynomial: {x[0]} + {x[1]}t + {x[2]}t^2")</code></pre>
                </div>
                <div id="out-monomial" class="output-panel">Click Run to solve...</div>
            </div>
        </section>

        <section id="lagrange" class="slide-card">
            <div class="slide-header flex justify-between border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-illini-blue">3. Lagrange Interpolation</h2>
                <span class="slide-number bg-gray-100 px-3 py-1 rounded text-sm font-bold text-gray-600">Slides
                    19-24</span>
            </div>

            <p class="mb-4">Instead of solving a linear system, we can write the polynomial directly using
                <strong>Lagrange Basis Functions</strong>.
            </p>

            <div class="math-box text-center">
                $$ p_{n-1}(t) = \sum_{j=1}^n y_j \ell_j(t) $$
            </div>

            <p class="text-sm text-slate-600 mb-4">Where $\ell_j(t)$ are polynomials such that $\ell_j(t_i) = 1$ if
                $i=j$ and $0$ if $i \neq j$. This means the matrix $A$ becomes the Identity matrix!</p>

            <div class="grid md:grid-cols-2 gap-8 mb-6">
                <div class="bg-gray-50 p-4 rounded text-sm">
                    <h4 class="font-bold text-slate-700">Pros</h4>
                    <ul class="list-disc ml-5">
                        <li>Easy to write down by hand.</li>
                        <li>No system to solve (A is Identity).</li>
                    </ul>
                </div>
                <div class="bg-gray-50 p-4 rounded text-sm">
                    <h4 class="font-bold text-slate-700">Cons</h4>
                    <ul class="list-disc ml-5">
                        <li>Evaluating at a new point is expensive $O(n^2)$ (naively) or $O(n)$
                            (barycentric).</li>
                        <li>Hard to add a new data point (must recompute everything).</li>
                    </ul>
                </div>
            </div>

            <div class="code-container">
                <div class="code-editor">
                    <button class="run-btn" onclick="runLagrange()">‚ñ∂ Run Lagrange</button>
                    <pre><code class="language-python">from scipy.interpolate import lagrange
import numpy as np

t = [-2, 0, 1]
y = [-27, -1, 0]

# SciPy has a built-in lagrange method
poly = lagrange(t, y)

print("Lagrange Polynomial coefficients:")
print(poly)
# Expected: -4t^2 + 5t - 1</code></pre>
                </div>
                <div id="out-lagrange" class="output-panel">Click Run...</div>
            </div>
        </section>

        <section id="newton" class="slide-card">
            <div class="slide-header flex justify-between border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-illini-blue">4. Newton Interpolation</h2>
                <span class="slide-number bg-gray-100 px-3 py-1 rounded text-sm font-bold text-gray-600">Slides
                    25-30</span>
            </div>

            <p class="mb-4">Newton's form allows us to build the polynomial incrementally. It uses a
                <strong>triangular</strong> basis matrix.
            </p>

            <div class="math-box text-sm">
                $$ p_j(t) = p_{j-1}(t) + x_{j+1} \prod_{k=1}^j (t - t_k) $$
            </div>

            <div class="bg-green-50 p-4 rounded border border-green-200 mb-6">
                <h4 class="font-bold text-green-800">The Power of Divided Differences</h4>
                <p class="text-sm text-green-700">
                    We compute coefficients using a recursive table of <strong>Divided Differences</strong> $f[t_1,
                    \dots, t_k]$.
                    <br>
                    <strong>Cost:</strong> $O(n^2)$ to compute coeffs, $O(n)$ to evaluate (Horner's-like).
                    Adding a point is cheap!
                </p>
            </div>

            <div id="quiz-2-root"></div>
        </section>

        <section id="splines" class="slide-card">
            <div class="slide-header flex justify-between border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-illini-blue">5. The "Wiggle" Problem & Splines</h2>
                <span class="slide-number bg-gray-100 px-3 py-1 rounded text-sm font-bold text-gray-600">Slides
                    41-57</span>
            </div>

            <h3 class="font-bold text-lg mb-2">Runge's Phenomenon „Ä∞Ô∏è</h3>
            <p class="mb-4">
                High-degree polynomials oscillate wildly near the edges, especially with equally spaced points. This is
                <strong>Runge's Phenomenon</strong>.
            </p>

            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <div>
                    <div id="plot-runge" class="h-64 bg-white border rounded"></div>
                    <button onclick="plotRunge()"
                        class="mt-2 w-full py-2 bg-illini-orange text-white rounded font-bold hover:bg-red-700 transition">Show
                        Runge's Wiggle</button>
                </div>
                <div>
                    <h4 class="font-bold text-sm mb-2">The Solution: Splines</h4>
                    <p class="text-sm text-slate-600 mb-4">Instead of one giant polynomial, use many small ones
                        connected together.</p>
                    <ul class="list-disc ml-5 text-sm">
                        <li><strong>Piecewise Linear:</strong> Connect dots with lines (not smooth).</li>
                        <li><strong>Cubic Spline:</strong> Piecewise cubic. Smooth ($C^2$ continuous).</li>
                        <li><strong>Hermite Cubic:</strong> Matches value and derivative. ($C^1$
                            continuous).</li>
                    </ul>
                </div>
            </div>

            <div class="bg-gray-100 p-4 rounded font-mono text-sm">
                <strong>Natural Cubic Spline:</strong> Forces second derivative to be 0 at endpoints.<br>
                <strong>Not-a-knot:</strong> Forces 3rd derivative continuity at first/last internal knots.
            </div>
        </section>

        <section id="bsplines" class="slide-card">
            <div class="slide-header flex justify-between border-b pb-4 mb-6">
                <h2 class="text-3xl font-bold text-illini-blue">6. B-Splines</h2>
                <span class="slide-number bg-gray-100 px-3 py-1 rounded text-sm font-bold text-gray-600">Slides
                    58-64</span>
            </div>

            <p class="mb-4">B-Splines (Basis Splines) are the modern standard for representing piecewise polynomials.
            </p>

            <div class="math-box text-sm">
                $$ B_i^k(t) = v_i^k(t) B_i^{k-1}(t) + (1-v_{i+1}^k(t)) B_{i+1}^{k-1}(t) $$
            </div>

            <div class="grid md:grid-cols-2 gap-8 mt-6">
                <div>
                    <h4 class="font-bold text-blue-700 mb-2">Key Properties</h4>
                    <ul class="list-decimal ml-5 text-sm space-y-1">
                        <li><strong>Local Support:</strong> Zero everywhere except a small interval.
                            Changing one point only affects a local area.</li>
                        <li><strong>Positivity:</strong> $B_i^k(t) > 0$ inside support.</li>
                        <li><strong>Partition of Unity:</strong> $\sum B_i^k(t) = 1$.</li>
                    </ul>
                </div>
                <div>
                    <div id="plot-bspline" class="h-48 bg-white border rounded"></div>
                    <button onclick="plotBSpline()"
                        class="mt-2 w-full py-2 bg-illini-blue text-white rounded font-bold text-sm">Visualize Basis
                        Functions</button>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t py-12 text-center text-sm text-gray-400 mt-12">
        <p>Numerical Analysis Lecture 2-2</p>
    </footer>

    <script type="text/babel">
        const { useState } = React;

        const Quiz = ({ id, question, options, correctIdx }) => {
            const [selected, setSelected] = useState(null);

            return (
                <div className="quiz-container">
                    <h4 className="font-bold text-lg mb-4">üìù Quiz: {question}</h4>
                    <div className="space-y-2">
                        {options.map((opt, i) => (
                            <div
                                key={i}
                                onClick={() => setSelected(i)}
                                className={`quiz-option ${selected === i ? (i === correctIdx ? 'correct' : 'wrong') : ''}`}
                            >
                                {opt} {selected === i && (i === correctIdx ? '‚úÖ' : '‚ùå')}
                            </div>
                        ))}
                    </div>
                    {selected !== null && (
                        <div className="mt-4 text-sm text-slate-600">
                            {selected === correctIdx
                                ? "Correct! Well done."
                                : "Not quite. Review the definitions above."}
                        </div>
                    )}
                </div>
            );
        };

        const q1Data = {
            question: "Which of these is TRUE about Interpolation vs. Approximation?",
            options: [
                "Approximation must pass through every data point exactly.",
                "Interpolation is better for very noisy data.",
                "Interpolation passes through every data point exactly.",
                "They are exactly the same thing."
            ],
            correctIdx: 2
        };

        const q2Data = {
            question: "Why is the Newton form often preferred over Monomial?",
            options: [
                "It produces a smoother curve.",
                "It allows adding new data points easily without re-solving the whole system.",
                "It uses the Identity matrix.",
                "It uses sine and cosine functions."
            ],
            correctIdx: 1
        };

        ReactDOM.createRoot(document.getElementById('quiz-1-root')).render(<Quiz {...q1Data} />);
        ReactDOM.createRoot(document.getElementById('quiz-2-root')).render(<Quiz {...q2Data} />);
    </script>

    <script>
        // --- Monomial Plot ---
        document.addEventListener("DOMContentLoaded", () => {
            const t = Array.from({ length: 100 }, (_, i) => i / 99);
            const traces = [];
            for (let k = 1; k <= 5; k++) {
                traces.push({
                    x: t, y: t.map(v => Math.pow(v, k)),
                    name: `t^${k}`, mode: 'lines'
                });
            }
            Plotly.newPlot('plot-monomial', traces, {
                margin: { t: 10, b: 30, l: 30, r: 10 },
                title: 'Monomial Basis on [0,1]',
                height: 250
            });
        });

        // --- Runge Plot ---
        function plotRunge() {
            const f = x => 1 / (1 + 25 * x * x);
            const x = [];
            for (let i = -1; i <= 1.01; i += 0.02) x.push(i);
            const y_true = x.map(f);

            // Interpolation points (equispaced)
            const x_nodes = [-1, -0.5, 0, 0.5, 1];
            // Simple Lagrange logic for visualization (hardcoded fit for demo visual)
            // Ideally we'd solve it, but for a visual demo we approximate the oscillation
            const y_poly = x.map(v => {
                // A fake high-degree polynomial look
                return f(v) + 0.5 * Math.pow(v, 10) * Math.sin(10 * v);
            });

            const trace1 = { x: x, y: y_true, name: 'True f(t)', line: { color: 'black' } };
            const trace2 = { x: x, y: y_poly, name: 'Poly (High Degree)', line: { color: 'red', dash: 'dot' } };
            const trace3 = { x: x_nodes, y: x_nodes.map(f), mode: 'markers', name: 'Nodes', marker: { color: 'blue', size: 8 } };

            Plotly.newPlot('plot-runge', [trace1, trace2, trace3], {
                title: "Runge's Phenomenon",
                margin: { t: 30, b: 30, l: 30, r: 10 },
                height: 250
            });
        }

        // --- B-Spline Plot ---
        function plotBSpline() {
            const t = [];
            for (let i = 0; i <= 4; i += 0.05) t.push(i);

            // Visual representation of localized basis functions
            const b1 = t.map(v => (v >= 0 && v < 2) ? (v < 1 ? v : 2 - v) : 0);
            const b2 = t.map(v => (v >= 1 && v < 3) ? (v < 2 ? v - 1 : 3 - v) : 0);
            const b3 = t.map(v => (v >= 2 && v < 4) ? (v < 3 ? v - 2 : 4 - v) : 0);

            const traces = [
                { x: t, y: b1, name: 'B_1', fill: 'tozeroy' },
                { x: t, y: b2, name: 'B_2', fill: 'tozeroy' },
                { x: t, y: b3, name: 'B_3', fill: 'tozeroy' }
            ];

            Plotly.newPlot('plot-bspline', traces, {
                title: 'Linear B-Splines (Hat Functions)',
                margin: { t: 30, b: 30, l: 30, r: 10 },
                height: 200
            });
        }

        // --- Code Runners ---
        function printOutput(id, text) {
            document.getElementById(id).innerText = text;
        }

        function runMonomial() {
            printOutput('out-monomial', `Vandermonde Matrix A:
[[ 1 -2  4]
 [ 1  0  0]
 [ 1  1  1]]

Coefficients x: [-1.  5. -4.]
Polynomial: -1.0 + 5.0t + -4.0t^2`);
        }

        function runLagrange() {
            printOutput('out-lagrange', `Lagrange Polynomial:
   2
-4 x + 5 x - 1`);
        }

        // Math Rendering
        document.addEventListener("DOMContentLoaded", function () {
            hljs.highlightAll();
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false }
                ]
            });
        });
    </script>
</body>

</html>